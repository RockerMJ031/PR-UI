<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Students - Admin Portal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #663399;
            --primary-dark: #4a2570;
            --primary-light: #8a5bb8;
            --secondary-color: #f8f9fa;
            --text-color: #333;
            --text-light: #666;
            --border-color: #e0e0e0;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --info-color: #17a2b8;
            --white: #ffffff;
            --shadow: 0 2px 10px rgba(0,0,0,0.1);
            --border-radius: 8px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--secondary-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar - Using admin-dashboard.html style */
        .sidebar {
            width: 250px;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            padding: 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
        }

        .logo {
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .logo h2 {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .nav-menu {
            padding: 20px 0;
        }

        .nav-item {
            margin: 5px 0;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .nav-link:hover,
        .nav-link.active {
            background-color: rgba(255,255,255,0.1);
            color: white;
            border-right: 3px solid white;
        }

        .nav-link i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }

        .user-profile {
            position: absolute;
            bottom: 0;
            width: 100%;
            padding: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .user-info {
            display: flex;
            align-items: center;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 250px;
            padding: 20px;
        }

        .header {
            background: white;
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            color: var(--primary-color);
            font-size: 2rem;
            font-weight: 600;
        }

        .header-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .btn-success {
            background-color: var(--success-color);
            color: white;
        }

        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-secondary {
            background-color: #6c757d;
            color: white;
        }

        /* Stats Cards */
        .stats-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
            text-align: center;
            border-left: 5px solid var(--primary-color);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .stat-label {
            color: var(--text-light);
            font-size: 0.9rem;
            font-weight: 500;
        }

        /* Filter Section */
        .filter-section {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        .filter-row {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .filter-select {
            padding: 12px 15px;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            background-color: white;
            font-size: 14px;
            min-width: 150px;
            font-family: inherit;
            transition: border-color 0.3s ease;
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        /* Student Table */
        .students-table-container {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
        }

        .table-header {
            padding: 25px;
            border-bottom: 2px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            color: white;
        }

        .table-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin: 0;
        }

        .students-table {
            width: 100%;
            border-collapse: collapse;
        }

        .students-table th {
            text-align: left;
            padding: 18px 20px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-bottom: 2px solid var(--border-color);
            color: var(--text-color);
            font-weight: 600;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .students-table th:last-child {
            text-align: center;
        }

        .students-table td {
            padding: 18px 20px;
            border-bottom: 1px solid var(--border-color);
            vertical-align: middle;
        }

        .students-table td:last-child {
            text-align: center;
        }

        .students-table tr:hover {
            background: linear-gradient(135deg, rgba(102, 51, 153, 0.03) 0%, rgba(102, 51, 153, 0.08) 100%);
            transform: translateX(2px);
            transition: all 0.3s ease;
        }

        .students-table tbody tr {
            transition: all 0.3s ease;
        }

        .student-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .student-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 16px;
        }

        .student-details h4 {
            margin: 0;
            font-size: 15px;
            color: var(--text-color);
            font-weight: 600;
        }

        .student-details p {
            margin: 4px 0 0 0;
            font-size: 13px;
            color: var(--text-light);
        }

        .status-badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-active {
            background-color: rgba(40, 167, 69, 0.15);
            color: var(--success-color);
        }

        .status-pending {
            background-color: rgba(255, 193, 7, 0.15);
            color: var(--warning-color);
        }

        .status-concern {
            background-color: rgba(220, 53, 69, 0.15);
            color: var(--danger-color);
        }

        .status-inactive {
            background-color: rgba(108, 117, 125, 0.15);
            color: #6c757d;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
            justify-content: center;
        }

        .action-btn {
            padding: 10px 16px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            border: none;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            min-width: 80px;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .student-details-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .student-details-btn:hover {
            background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
        }

        .student-details-btn i {
            font-size: 14px;
        }

        .leave-request-btn {
            background-color: var(--info-color);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }

        .modal-content {
            background-color: white;
            margin: 2% auto;
            padding: 0;
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .modal-header {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 12px 12px 0 0;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 600;
        }

        .close {
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
            transition: opacity 0.3s;
        }

        .close:hover {
            opacity: 0.7;
        }

        .modal-body {
            padding: 0;
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .search-bar {
            position: sticky;
            top: 0;
            background: white;
            padding: 20px 30px;
            border-bottom: 1px solid var(--border-color);
            z-index: 10;
        }

        .search-bar input {
            width: 100%;
            padding: 12px 45px 12px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .search-bar input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .search-bar i {
            position: absolute;
            right: 45px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
        }

        .student-list-container {
            flex: 1;
            overflow-y: auto;
            padding: 0 30px 30px;
        }

        .student-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* Form Styles */
        .form-section {
            padding: 20px;
        }

        .form-section h3 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 1.3rem;
        }

        .form-description {
            color: var(--text-light);
            margin-bottom: 25px;
            line-height: 1.5;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 600;
            color: var(--text-color);
            margin-bottom: 8px;
            font-size: 14px;
        }

        .form-group input,
        .form-group select {
            padding: 12px 15px;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 14px;
            font-family: inherit;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .form-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            margin-bottom: 20px;
        }

        .form-note {
            background-color: #f8f9fa;
            border-left: 4px solid var(--info-color);
            padding: 15px;
            border-radius: var(--border-radius);
        }

        .form-note p {
            margin: 0;
            color: var(--text-color);
            font-size: 14px;
        }

        .form-note a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 600;
        }

        .form-note a:hover {
            text-decoration: underline;
        }

        .remove-options {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .remove-options .btn {
            min-width: 200px;
            padding: 15px 25px;
            font-size: 16px;
        }

        #removeAllSection h4,
        #removeSpecificSection h4 {
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border-color);
        }

        /* Student Item Styles for Modal */
        .student-item {
            background: white;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .student-item:hover {
            border-color: var(--primary-color);
            box-shadow: var(--shadow);
        }

        .student-info {
            flex: 1;
        }

        .student-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .student-name {
            font-weight: 600;
            font-size: 16px;
            color: var(--text-color);
        }

        .student-status {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .student-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 8px;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
        }

        .detail-row .label {
            font-weight: 600;
            color: var(--text-light);
            font-size: 13px;
        }

        .detail-row .value {
            color: var(--text-color);
            font-size: 13px;
        }

        .student-actions {
            margin-left: 20px;
        }

        .add-btn {
            background-color: var(--success-color);
        }

        .remove-btn {
            background-color: var(--danger-color);
        }

        .cancel-btn {
            background-color: var(--danger-color);
        }

        .extend-btn {
            background-color: var(--info-color);
        }

        .student-item {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .student-item:hover {
            border-color: var(--primary-color);
            box-shadow: 0 4px 12px rgba(102, 51, 153, 0.15);
            transform: translateY(-2px);
        }

        .student-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            border-radius: 8px 0 0 8px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .student-item:hover::before {
            opacity: 1;
        }

        .student-item {
            position: relative;
        }

        /* Highlight Modal Styles */
        .highlight-content {
            padding: 20px;
            max-height: 60vh;
            overflow-y: auto;
        }
        
        .highlight-section {
            margin-bottom: 30px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 20px;
        }
        
        .highlight-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        
        .highlight-section h3 {
            color: var(--primary-color);
            font-size: 1.2rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .highlight-item {
            display: flex;
            gap: 15px;
            padding: 15px;
            border-radius: var(--border-radius);
            margin-bottom: 15px;
            border-left: 4px solid;
        }
        
        .highlight-item.positive {
            background-color: rgba(40, 167, 69, 0.05);
            border-left-color: var(--success-color);
        }
        
        .highlight-item.attention {
            background-color: rgba(220, 53, 69, 0.05);
            border-left-color: var(--danger-color);
        }
        
        .highlight-item.goal {
            background-color: rgba(102, 51, 153, 0.05);
            border-left-color: var(--primary-color);
        }
        
        .highlight-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }
        
        .highlight-item.positive .highlight-icon {
            background-color: var(--success-color);
            color: white;
        }
        
        .highlight-item.attention .highlight-icon {
            background-color: var(--danger-color);
            color: white;
        }
        
        .highlight-item.goal .highlight-icon {
            background-color: var(--primary-color);
            color: white;
        }
        
        .highlight-text {
            flex: 1;
        }
        
        .highlight-text h4 {
            margin: 0 0 8px 0;
            font-size: 1rem;
            color: var(--text-color);
        }
        
        .highlight-text p {
            margin: 0 0 8px 0;
            color: var(--text-light);
            line-height: 1.5;
        }
        
        .highlight-date {
            font-size: 0.85rem;
            color: var(--text-light);
            font-style: italic;
        }
        
        /* Student Details Modal Styles */
        .student-details-btn {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .student-details-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 51, 153, 0.3);
        }
        
        .subject-selector-section {
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(102, 51, 153, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(102, 51, 153, 0.1);
        }
        
        .subject-selector-section label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .subject-selector {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            background: white;
            transition: border-color 0.3s ease;
        }
        
        .subject-selector:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 51, 153, 0.1);
        }
        
        .content-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 25px;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0;
        }
        
        .tab-button {
            background: none;
            border: none;
            padding: 12px 20px;
            font-size: 0.95rem;
            font-weight: 500;
            color: var(--text-light);
            cursor: pointer;
            border-radius: 8px 8px 0 0;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            position: relative;
        }
        
        .tab-button:hover {
            background: rgba(102, 51, 153, 0.05);
            color: var(--primary-color);
        }
        
        .tab-button.active {
            background: var(--primary-color);
            color: white;
        }
        
        .tab-button.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--primary-color);
        }
        
        .content-panel {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        .content-panel.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Attendance Styles */
        .attendance-summary {
            margin-bottom: 25px;
        }
        
        .attendance-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-item {
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 10px;
            border: 1px solid var(--border-color);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        .stat-number {
            display: block;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.85rem;
            color: var(--text-light);
            font-weight: 500;
        }
        
        .attendance-calendar h4 {
            margin-bottom: 15px;
            color: var(--text-dark);
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
        }
        
        .calendar-item {
            padding: 10px;
            text-align: center;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .calendar-item.present {
            background: rgba(40, 167, 69, 0.1);
            color: var(--success-color);
            border: 1px solid rgba(40, 167, 69, 0.2);
        }
        
        .calendar-item.absent {
            background: rgba(220, 53, 69, 0.1);
            color: var(--danger-color);
            border: 1px solid rgba(220, 53, 69, 0.2);
        }
        
        /* Notes Styles */
        .notes-section h4 {
            margin-bottom: 20px;
            color: var(--text-dark);
        }
        
        .note-item {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        .note-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .note-date {
            font-size: 0.85rem;
            color: var(--text-light);
            font-weight: 500;
        }
        
        .note-author {
            font-size: 0.85rem;
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .note-content {
            color: var(--text-dark);
            line-height: 1.5;
        }
        
        .note-section {
            margin-bottom: 15px;
        }
        
        .note-section:last-child {
            margin-bottom: 0;
        }
        
        .note-section h5 {
            color: var(--text-dark);
            font-size: 14px;
            font-weight: 600;
            margin: 0 0 8px 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .note-section h5 i {
            font-size: 12px;
        }
        
        .note-section h5 .fa-star {
            color: var(--success-color);
        }
        
        .note-section h5 .fa-exclamation-circle {
            color: var(--warning-color);
        }
        
        .note-section p {
            margin: 0;
            color: var(--text-dark);
            line-height: 1.5;
            padding-left: 20px;
        }
        
        .note-section ol {
            margin: 0;
            padding-left: 40px;
            color: var(--text-dark);
            line-height: 1.5;
        }
        
        .note-section ol li {
            margin-bottom: 8px;
        }
        
        .note-section ol li:last-child {
            margin-bottom: 0;
        }
        
        .add-note-section {
            margin-top: 25px;
            padding: 20px;
            background: rgba(102, 51, 153, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(102, 51, 153, 0.1);
        }
        
        .add-note-section textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-family: inherit;
            font-size: 0.95rem;
            resize: vertical;
            margin-bottom: 15px;
        }
        
        .add-note-section textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 51, 153, 0.1);
        }
        
        /* Lesson Content Styles */
        .lesson-content-section h4 {
            margin-bottom: 20px;
            color: var(--text-dark);
        }
        
        .content-modules {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .module-item {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s ease;
        }
        
        .module-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .module-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
        }
        
        .module-header i {
            font-size: 1.2rem;
        }
        
        .module-item.completed .module-header i {
            color: var(--success-color);
        }
        
        .module-item.in-progress .module-header i {
            color: var(--warning-color);
        }
        
        .module-item.pending .module-header i {
            color: var(--text-light);
        }
        
        .module-title {
            font-weight: 600;
            color: var(--text-dark);
            flex: 1;
        }
        
        .module-status {
            font-size: 0.85rem;
            font-weight: 500;
            padding: 4px 12px;
            border-radius: 20px;
        }
        
        .module-item.completed .module-status {
            background: rgba(40, 167, 69, 0.1);
            color: var(--success-color);
        }
        
        .module-item.in-progress .module-status {
            background: rgba(255, 193, 7, 0.1);
            color: var(--warning-color);
        }
        
        .module-item.pending .module-status {
            background: rgba(108, 117, 125, 0.1);
            color: var(--text-light);
        }
        
        .module-progress {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .progress-bar {
            flex: 1;
            height: 8px;
            background: var(--border-color);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            transition: width 0.3s ease;
        }
        
        .progress-text {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-dark);
            min-width: 40px;
        }
        
        /* Lesson Content List Styles */
        .lesson-content-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .lesson-item {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .lesson-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .lesson-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .lesson-header i {
            font-size: 1.1rem;
            color: var(--primary-color);
        }
        
        .lesson-date {
            font-weight: 600;
            color: var(--text-dark);
            font-size: 0.95rem;
        }
        
        .lesson-description {
            margin: 0;
        }
        
        .lesson-description p {
            margin: 0;
            line-height: 1.6;
            color: var(--text-color);
            font-size: 0.95rem;
        }
        
        .modal-footer {
            padding: 20px 30px;
            background-color: #f8f9fa;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        /* Student Reports Styles */
        .reports-section {
            padding: 20px 0;
        }
        
        .reports-description {
            color: var(--text-light);
            margin-bottom: 25px;
            font-size: 14px;
        }
        
        .student-reports-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-top: 20px;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .student-report-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--border-color);
        }
        
        .student-report-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
        
        .student-report-header {
            padding: 20px;
            text-align: center;
            color: white;
            position: relative;
        }
        
        .student-report-card.session .student-report-header {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }
        
        .student-report-card.attendance .student-report-header {
            background: linear-gradient(135deg, #3498db, #2980b9);
        }
        
        .student-report-card.behaviour .student-report-header {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
        }
        
        .student-report-card.termly .student-report-header {
            background: linear-gradient(135deg, #27ae60, #229954);
        }
        
        .report-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            opacity: 0.9;
        }
        
        .student-report-header h5 {
            font-size: 1.1rem;
            font-weight: 600;
            margin: 0 0 5px 0;
        }
        
        .student-report-header p {
            font-size: 0.85rem;
            margin: 0;
            opacity: 0.9;
        }
        
        .student-report-body {
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .student-report-link {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background: var(--primary-color);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 14px;
        }
        
        .student-report-link:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 51, 153, 0.3);
        }
        
        .report-password {
            background: #f8f9fa;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 10px;
            font-family: monospace;
            font-size: 0.85rem;
            color: var(--text-color);
            text-align: center;
        }

        /* Student Type Tabs */
        .student-type-tabs {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            padding: 15px;
        }

        .tab-navigation {
            display: flex;
            gap: 15px;
        }

        .tab-btn {
            flex: 1;
            padding: 25px 30px;
            border: 2px solid var(--border-color);
            background: white;
            color: var(--text-color);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            transition: all 0.3s ease;
            border-radius: var(--border-radius);
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .tab-btn:hover {
            background-color: rgba(102, 51, 153, 0.05);
            color: var(--primary-color);
            border-color: var(--primary-color);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(102, 51, 153, 0.15);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            color: white;
            border-color: var(--primary-color);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 51, 153, 0.3);
        }

        .tab-btn i {
            font-size: 20px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .tab-navigation {
                flex-direction: column;
            }

            .tab-btn {
                padding: 15px;
                font-size: 13px;
            }
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
            }

            .main-content {
                margin-left: 0;
            }

            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }

            .stats-overview {
                grid-template-columns: 1fr;
            }

            .filter-row {
                flex-direction: column;
                align-items: stretch;
            }

            .students-table {
                font-size: 12px;
            }

            .students-table th,
            .students-table td {
                padding: 10px;
            }

            .student-info {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }

            .action-buttons {
                justify-content: center;
            }

            .modal-content {
                width: 95%;
                margin: 5% auto;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .remove-options {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="logo">
                <h2>Admin Portal</h2>
            </div>
            
            <div class="nav-menu">
                <div class="nav-item">
                    <a href="admin-dashboard.html" class="nav-link">
                        <i class="fas fa-tachometer-alt"></i>
                        Dashboard
                    </a>
                </div>
                <div class="nav-item">
                    <a href="students-enhanced.html" class="nav-link active">
                        <i class="fas fa-users"></i>
                        Students
                    </a>
                </div>
                <div class="nav-item">
                    <a href="sessions-enhanced.html" class="nav-link">
                        <i class="fas fa-calendar-alt"></i>
                        Sessions
                    </a>
                </div>
                <div class="nav-item">
                    <a href="reports-enhanced.html" class="nav-link">
                        <i class="fas fa-chart-bar"></i>
                        Reports
                    </a>
                </div>
                <div class="nav-item">
                    <a href="finance.html" class="nav-link">
                        <i class="fas fa-pound-sign"></i>
                        Finance
                    </a>
                </div>
            </div>
            
            <div class="user-profile">
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div>
                        <div style="font-weight: 600;">John Admin</div>
                    <div style="font-size: 0.8rem; opacity: 0.8;">Admin</div>
                    </div>
                </div>
            </div>
        </nav>
        
        <!-- Main Content -->
        <main class="main-content">
            <div class="header">
                <h1>Student Management</h1>
            </div>

            <!-- Student Type Tabs -->
            <div class="student-type-tabs">
                <div class="tab-navigation">
                    <button class="tab-btn active" onclick="switchStudentType('tutoring')" data-tab="tutoring">
                        <i class="fas fa-graduation-cap"></i>
                        Tutoring Students
                    </button>
                    <button class="tab-btn" onclick="switchStudentType('alternative')" data-tab="alternative">
                        <i class="fas fa-user-graduate"></i>
                        Alternative Provision Students
                    </button>
                </div>
            </div>

            <!-- Stats Overview -->
            <div class="stats-overview">
                <div class="stat-card">
                    <div class="stat-number" id="totalStudents">12</div>
                    <div class="stat-label">Total Students</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="activeStudents">18</div>
                    <div class="stat-label">Active Students</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="pendingStudents">3</div>
                    <div class="stat-label">Pending Approval</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="attentionStudents">2</div>
                    <div class="stat-label">Need Attention</div>
                </div>
            </div>

            <!-- Filter Section -->
            <div class="filter-section">
                <div class="filter-row">
                    <select class="filter-select" id="statusFilter">
                        <option value="">All Status</option>
                        <option value="active">Active</option>
                        <option value="pending">Pending</option>
                        <option value="concern">Need Attention</option>
                        <option value="inactive">Inactive</option>
                    </select>
                    
                    <select class="filter-select" id="subjectFilter">
                        <option value="">All Subjects</option>
                        <option value="mathematics">Mathematics</option>
                        <option value="english">English</option>
                        <option value="science">Science</option>
                        <option value="history">History</option>
                    </select>
                    
                    <select class="filter-select" id="levelFilter">
                        <option value="">All Levels</option>
                        <option value="beginner">Beginner</option>
                        <option value="intermediate">Intermediate</option>
                        <option value="advanced">Advanced</option>
                    </select>
                </div>
            </div>

            <!-- Students Table -->
            <div class="students-table-container">
                <div class="table-header">
                    <h2 class="table-title">Student List</h2>
                    <span id="student-count">12 students total</span>
                </div>
                
                <table class="students-table">
                    <thead>
                        <tr>
                            <th>Student</th>
                            <th id="subject-header">Subject</th>
                            <th>Sessions</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <div class="student-info">
                                    <div class="student-avatar">JD</div>
                                    <div class="student-details">
                                        <h4>John Doe</h4>
                                        <p>john.doe@email.com</p>
                                    </div>
                                </div>
                            </td>
                            <td>Core Subjects</td>
                            <td>12/20</td>
                            <td><span class="status-badge status-active">Active</span></td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn student-details-btn" onclick="openStudentDetails('John Doe')" title="View Student Details">
                                        <i class="fas fa-user-circle"></i>
                                        Details
                                    </button>
                                </div>
                            </td>
                        </tr>
                        
                        <tr>
                            <td>
                                <div class="student-info">
                                    <div class="student-avatar">JS</div>
                                    <div class="student-details">
                                        <h4>Jane Smith</h4>
                                        <p>jane.smith@email.com</p>
                                    </div>
                                </div>
                            </td>
                            <td>Core Subjects + PSHE Careers + PE and Art</td>
                            <td>8/15</td>
                            <td><span class="status-badge status-active">Active</span></td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn student-details-btn" onclick="openStudentDetails('Jane Smith')" title="View Student Details">
                                        <i class="fas fa-user-circle"></i>
                                        Details
                                    </button>
                                </div>
                            </td>
                        </tr>
                        
                        <tr>
                            <td>
                                <div class="student-info">
                                    <div class="student-avatar">MJ</div>
                                    <div class="student-details">
                                        <h4>Mike Johnson</h4>
                                        <p>mike.johnson@email.com</p>
                                    </div>
                                </div>
                            </td>
                            <td>All Subjects + Therapy</td>
                            <td>5/10</td>
                            <td><span class="status-badge status-pending">Pending</span></td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn student-details-btn" onclick="openStudentDetails('Mike Johnson')" title="View Student Details">
                                        <i class="fas fa-user-circle"></i>
                                        Details
                                    </button>
                                </div>
                            </td>
                        </tr>
                        
                        <tr>
                            <td>
                                <div class="student-info">
                                    <div class="student-avatar">SW</div>
                                    <div class="student-details">
                                        <h4>Sarah Wilson</h4>
                                        <p>sarah.wilson@email.com</p>
                                    </div>
                                </div>
                            </td>
                            <td>Purple Ruler Blueprint</td>
                            <td>15/20</td>
                            <td><span class="status-badge status-active">Active</span></td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn student-details-btn" onclick="openStudentDetails('Sarah Wilson')" title="View Student Details">
                                        <i class="fas fa-user-circle"></i>
                                        Details
                                    </button>
                                </div>
                            </td>
                        </tr>
                        
                        <tr>
                            <td>
                                <div class="student-info">
                                    <div class="student-avatar">AB</div>
                                    <div class="student-details">
                                        <h4>Alex Brown</h4>
                                        <p>alex.brown@email.com</p>
                                    </div>
                                </div>
                            </td>
                            <td>Mathematics</td>
                            <td>3/25</td>
                            <td><span class="status-badge status-concern">NEEDS ATTENTION</span></td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn student-details-btn" onclick="openStudentDetails('Alex Brown')" title="View Student Details">
                                        <i class="fas fa-user-circle"></i>
                                        Details
                                    </button>
                                </div>
                            </td>
                        </tr>
                        
                        <tr>
                            <td>
                                <div class="student-info">
                                    <div class="student-avatar">LD</div>
                                    <div class="student-details">
                                        <h4>Lisa Davis</h4>
                                        <p>lisa.davis@email.com</p>
                                    </div>
                                </div>
                            </td>
                            <td>English</td>
                            <td>7/12</td>
                            <td><span class="status-badge status-active">Active</span></td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn student-details-btn" onclick="openStudentDetails('Lisa Davis')" title="View Student Details">
                                        <i class="fas fa-user-circle"></i>
                                        Details
                                    </button>
                                </div>
                            </td>
                        </tr>
                        
                        <tr>
                            <td>
                                <div class="student-info">
                                    <div class="student-avatar">TM</div>
                                    <div class="student-details">
                                        <h4>Tom Miller</h4>
                                        <p>tom.miller@email.com</p>
                                    </div>
                                </div>
                            </td>
                            <td>Science</td>
                            <td>0/8</td>
                            <td><span class="status-badge status-pending">Pending</span></td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn student-details-btn" onclick="openStudentDetails('Tom Miller')" title="View Student Details">
                                        <i class="fas fa-user-circle"></i>
                                        Details
                                    </button>
                                </div>
                            </td>
                        </tr>
                        
                        <tr>
                            <td>
                                <div class="student-info">
                                    <div class="student-avatar">EG</div>
                                    <div class="student-details">
                                        <h4>Emma Garcia</h4>
                                        <p>emma.garcia@email.com</p>
                                    </div>
                                </div>
                            </td>
                            <td>History</td>
                            <td>18/20</td>
                            <td><span class="status-badge status-active">Active</span></td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn student-details-btn" onclick="openStudentDetails('Emma Garcia')" title="View Student Details">
                                        <i class="fas fa-user-circle"></i>
                                        Details
                                    </button>
                                </div>
                            </td>
                        </tr>
                        
                        <!-- More Tutoring Students -->
                        <tr>
                            <td>
                                <div class="student-info">
                                    <div class="student-avatar">RJ</div>
                                    <div class="student-details">
                                        <h4>Ryan Jones</h4>
                                        <p>ryan.jones@email.com</p>
                                    </div>
                                </div>
                            </td>
                            <td>Geography</td>
                            <td>6/15</td>
                            <td><span class="status-badge status-active">Active</span></td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn student-details-btn" onclick="openStudentDetails('Ryan Jones')" title="View Student Details">
                                        <i class="fas fa-user-circle"></i>
                                        Details
                                    </button>
                                </div>
                            </td>
                        </tr>
                        
                        <tr>
                            <td>
                                <div class="student-info">
                                    <div class="student-avatar">KT</div>
                                    <div class="student-details">
                                        <h4>Katie Thompson</h4>
                                        <p>katie.thompson@email.com</p>
                                    </div>
                                </div>
                            </td>
                            <td>Art</td>
                            <td>4/12</td>
                            <td><span class="status-badge status-pending">Pending</span></td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn student-details-btn" onclick="openStudentDetails('Katie Thompson')" title="View Student Details">
                                        <i class="fas fa-user-circle"></i>
                                        Details
                                    </button>
                                </div>
                            </td>
                        </tr>
                        
                        <tr>
                            <td>
                                <div class="student-info">
                                    <div class="student-avatar">DW</div>
                                    <div class="student-details">
                                        <h4>Daniel White</h4>
                                        <p>daniel.white@email.com</p>
                                    </div>
                                </div>
                            </td>
                            <td>Music</td>
                            <td>8/10</td>
                            <td><span class="status-badge status-active">Active</span></td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn student-details-btn" onclick="openStudentDetails('Daniel White')" title="View Student Details">
                                        <i class="fas fa-user-circle"></i>
                                        Details
                                    </button>
                                </div>
                            </td>
                        </tr>
                        
                        <tr>
                            <td>
                                <div class="student-info">
                                    <div class="student-avatar">MR</div>
                                    <div class="student-details">
                                        <h4>Maya Roberts</h4>
                                        <p>maya.roberts@email.com</p>
                                    </div>
                                </div>
                            </td>
                            <td>French</td>
                            <td>2/8</td>
                            <td><span class="status-badge status-concern">NEEDS ATTENTION</span></td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn student-details-btn" onclick="openStudentDetails('Maya Roberts')" title="View Student Details">
                                        <i class="fas fa-user-circle"></i>
                                        Details
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </main>
    </div>

    <!-- Student Modal -->
    <div id="studentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Add Student</h2>
                <span class="close" onclick="closeStudentModal()">&times;</span>
            </div>
            <div class="modal-body">
                <!-- Add Student Section -->
                <div id="addStudentSection" class="form-section">
                    <h3>Add New Student</h3>
                    <p class="form-description">Fill in the student details to add them to your admin program.</p>
                    
                    <form id="addStudentForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="studentName">Full Name</label>
                                <input type="text" id="studentName" name="studentName" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="studentEmail">Email Address</label>
                                <input type="email" id="studentEmail" name="studentEmail" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="studentPhone">Phone Number</label>
                                <input type="tel" id="studentPhone" name="studentPhone">
                            </div>
                            
                            <div class="form-group">
                                <label for="studentSubject" id="subject-form-label">Subject</label>
                                <select id="studentSubject" name="studentSubject" required>
                                    <option value="">Select Subject</option>
                                    <!-- Options will be populated dynamically based on student type -->
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="studentLevel">Level</label>
                                <select id="studentLevel" name="studentLevel" required>
                                    <option value="">Select Level</option>
                                    <option value="beginner">Beginner</option>
                                    <option value="intermediate">Intermediate</option>
                                    <option value="advanced">Advanced</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="sessionCount">Number of Sessions</label>
                                <input type="number" id="sessionCount" name="sessionCount" min="1" max="50" value="10">
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="closeStudentModal()">Cancel</button>
                            <button type="submit" class="btn btn-success">Add Student</button>
                        </div>
                    </form>
                    
                    <div class="form-note">
                        <p><strong>Note:</strong> The student will receive an email invitation to join the admin program. They will need to accept the invitation before sessions can begin. <a href="#">Learn more about the invitation process</a>.</p>
                    </div>
                </div>
                
                <!-- Remove Student Section -->
                <div id="removeStudentSection" class="form-section" style="display: none;">
                    <h3>Remove Student</h3>
                    <p class="form-description">Choose how you would like to remove students from your program.</p>
                    
                    <div class="remove-options">
                        <button class="btn btn-danger" onclick="showRemoveAllCourses()">Remove All Courses</button>
                        <button class="btn btn-secondary" onclick="showRemoveSpecificCourses()">Remove Specific Courses</button>
                    </div>
                    
                    <!-- Remove All Courses -->
                    <div id="removeAllSection" style="display: none;">
                        <h4>Remove All Courses</h4>
                        <p class="form-description">This will remove all students from all courses. This action cannot be undone.</p>
                        
                        <div class="search-bar" style="position: relative;">
                            <input type="text" id="searchAllStudents" placeholder="Search students...">
                            <i class="fas fa-search"></i>
                        </div>
                        
                        <div class="student-list-container">
                            <div id="allStudentsList" class="student-list">
                                <!-- Students will be populated here -->
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="closeStudentModal()">Cancel</button>
                            <button type="button" class="btn btn-danger" onclick="handleRemoveAllCourses()">Remove All Courses</button>
                        </div>
                    </div>
                    
                    <!-- Remove Specific Courses -->
                    <div id="removeSpecificSection" style="display: none;">
                        <h4>Remove Specific Courses</h4>
                        <p class="form-description">Select students and specific courses to remove.</p>
                        
                        <div class="search-bar" style="position: relative;">
                            <input type="text" id="searchSpecificStudents" placeholder="Search students...">
                            <i class="fas fa-search"></i>
                        </div>
                        
                        <div class="student-list-container">
                            <div id="specificStudentsList" class="student-list">
                                <!-- Students will be populated here -->
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="closeStudentModal()">Cancel</button>
                            <button type="button" class="btn btn-danger" onclick="handleRemoveSpecificCourse()">Remove Selected Courses</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Student Details Modal -->
    <div id="studentDetailsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="detailsStudentName">Student Details</h2>
                <span class="close" onclick="closeStudentDetailsModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="details-content">
                    <!-- Subject Selector -->
                    <div class="subject-selector-section">
                        <label for="subjectSelector">Select Subject:</label>
                        <select id="subjectSelector" class="subject-selector" onchange="switchSubjectContent()">
                            <option value="">Choose a subject...</option>
                        </select>
                    </div>
                    
                    <!-- Content Tabs -->
                    <div class="content-tabs">
                        <button class="tab-button active" onclick="switchTab('attendance')" data-tab="attendance">
                            <i class="fas fa-calendar-check"></i>
                            Attendance
                        </button>
                        <button class="tab-button" onclick="switchTab('notes')" data-tab="notes">
                            <i class="fas fa-sticky-note"></i>
                            Internal Notes
                        </button>
                        <button class="tab-button" onclick="switchTab('content')" data-tab="content">
                            <i class="fas fa-book-open"></i>
                            Lesson Content
                        </button>
                        <button class="tab-button" onclick="switchTab('reports')" data-tab="reports">
                            <i class="fas fa-chart-bar"></i>
                            Reports
                        </button>
                    </div>
                    
                    <!-- Content Areas -->
                    <div class="tab-content">
                        <!-- Attendance Tab -->
                        <div id="attendance-content" class="content-panel active">
                            <div class="attendance-summary">
                                <div class="attendance-stats">
                                    <div class="stat-item">
                                        <span class="stat-number"></span>
                                        <span class="stat-label">Attendance Rate</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-number">12</span>
                                        <span class="stat-label">Sessions Attended</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-number">2</span>
                                        <span class="stat-label">Missed Sessions</span>
                                    </div>
                                </div>
                            </div>
                            <div class="attendance-calendar">
                                <h4>Recent Attendance</h4>
                                <div class="calendar-grid">
                                    <div class="calendar-item present">Mon 18/12</div>
                                    <div class="calendar-item present">Wed 20/12</div>
                                    <div class="calendar-item absent">Fri 22/12</div>
                                    <div class="calendar-item present">Mon 25/12</div>
                                    <div class="calendar-item present">Wed 27/12</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Internal Notes Tab -->
                        <div id="notes-content" class="content-panel">
                            <div class="notes-section">
                                <h4>Internal Notes</h4>
                                <div class="note-item">
                                    <div class="note-header">
                                        <span class="note-date">Dec 20, 2023</span>
                                        <span class="note-author">Purple Ruler Teacher</span>
                                    </div>
                                    <div class="note-content">
                                        <div class="note-section">
                                            <h5><i class="fas fa-star"></i> Strengths:</h5>
                                            <ol>
                                                <li>Strong understanding of place value and accurate execution of calculations involving addition, subtraction, multiplication, and division.</li>
                                                <li>Confident with basic algebraic calculations and able to apply methods correctly.</li>
                                                <li>Good conceptual grasp of place value, supporting logical problem-solving.</li>
                                            </ol>
                                        </div>
                                        <div class="note-section">
                                            <h5><i class="fas fa-exclamation-circle"></i> Areas for Improvement:</h5>
                                            <ol>
                                                <li>Plotting</li>
                                                <li>Makes occasional errors in fraction operations</li>
                                                <li>Coordinates</li>
                                            </ol>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Lesson Content Tab -->
                        <div id="content-content" class="content-panel">
                            <div class="lesson-content-section">
                                <h4>Lesson Content</h4>
                                <div class="lesson-content-list">
                                    <div class="lesson-item">
                                        <div class="lesson-header">
                                            <i class="fas fa-calendar-alt"></i>
                                            <span class="lesson-date">Dec 20, 2024</span>
                                        </div>
                                        <div class="lesson-description">
                                            <p>The aims of the session were to cover revision on rounding off (to the nearest whole number and decimal place), fractions and ratios. Due to time constraints we were unable to cover a portion of the fraction revision and ratio.</p>
                                        </div>
                                    </div>
                                    <div class="lesson-item">
                                        <div class="lesson-header">
                                            <i class="fas fa-calendar-alt"></i>
                                            <span class="lesson-date">Dec 18, 2024</span>
                                        </div>
                                        <div class="lesson-description">
                                            <p>Focused on quadratic equations and their applications. Students practiced solving equations using factoring, completing the square, and the quadratic formula. Homework assigned on mixed practice problems.</p>
                                        </div>
                                    </div>
                                    <div class="lesson-item">
                                        <div class="lesson-header">
                                            <i class="fas fa-calendar-alt"></i>
                                            <span class="lesson-date">Dec 15, 2024</span>
                                        </div>
                                        <div class="lesson-description">
                                            <p>Introduction to algebraic expressions and basic operations. Covered simplifying expressions, combining like terms, and distributive property. Students showed good understanding of fundamental concepts.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Reports Tab -->
                        <div id="reports-content" class="content-panel">
                            <div class="reports-section">
                                <h4>Student Reports</h4>
                                <p class="reports-description">Access detailed reports for this student's progress and performance.</p>
                                
                                <div class="student-reports-grid">
                                    <!-- Student Session Report -->
                                    <div class="student-report-card session">
                                        <div class="student-report-header">
                                            <div class="report-icon">
                                                <i class="fas fa-user-graduate"></i>
                                            </div>
                                            <h5>Session Report</h5>
                                            <p>Individual session progress and outcomes</p>
                                        </div>
                                        <div class="student-report-body">
                                            <a href="https://example-lark-document-link.com/student-session" class="student-report-link" target="_blank">
                                                <i class="fas fa-external-link-alt"></i>
                                                View Report
                                            </a>
                                            <div class="report-password">
                                                Password: StudentSession2024
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeStudentDetailsModal()">Close</button>
            </div>
        </div>
    </div>

    <!-- Student Highlight Modal -->
    <div id="highlightModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="highlightStudentName">Student Weekly Highlights</h2>
                <span class="close" onclick="closeHighlightModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="highlight-content">
                    <div class="highlight-section">
                        <h3><i class="fas fa-trophy"></i> Achievements This Week</h3>
                        <div class="highlight-item positive">
                            <div class="highlight-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="highlight-text">
                                <h4>Improved Mathematics Performance</h4>
                                <p>Showed significant improvement in algebra concepts, completing 85% of assignments correctly.</p>
                                <span class="highlight-date">Monday, Dec 18</span>
                            </div>
                        </div>
                        <div class="highlight-item positive">
                            <div class="highlight-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="highlight-text">
                                <h4>Excellent Collaboration</h4>
                                <p>Demonstrated strong teamwork skills during group project presentations.</p>
                                <span class="highlight-date">Wednesday, Dec 20</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="highlight-section">
                        <h3><i class="fas fa-exclamation-triangle"></i> Areas Needing Attention</h3>
                        <div class="highlight-item attention">
                            <div class="highlight-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="highlight-text">
                                <h4>Attendance Concerns</h4>
                                <p>Missed 2 sessions this week. Follow-up with parent/guardian recommended.</p>
                                <span class="highlight-date">This Week</span>
                            </div>
                        </div>
                        <div class="highlight-item attention">
                            <div class="highlight-icon">
                                <i class="fas fa-book-open"></i>
                            </div>
                            <div class="highlight-text">
                                <h4>Assignment Submission</h4>
                                <p>Late submission of English essay. Additional support may be needed.</p>
                                <span class="highlight-date">Friday, Dec 22</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="highlight-section">
                        <h3><i class="fas fa-target"></i> Next Week Goals</h3>
                        <div class="highlight-item goal">
                            <div class="highlight-icon">
                                <i class="fas fa-bullseye"></i>
                            </div>
                            <div class="highlight-text">
                                <h4>Improve Attendance</h4>
                                <p>Aim for 100% attendance next week with parent support.</p>
                            </div>
                        </div>
                        <div class="highlight-item goal">
                            <div class="highlight-icon">
                                <i class="fas fa-pencil-alt"></i>
                            </div>
                            <div class="highlight-text">
                                <h4>Complete Pending Assignments</h4>
                                <p>Focus on catching up with English coursework and submit by Wednesday.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="closeHighlightModal()">Close</button>
                <button class="btn btn-success" onclick="exportHighlights()">Export Report</button>
            </div>
        </div>
    </div>

    <script>
        // Sample student data
        const studentData = [
            {
                id: 1,
                name: "John Doe",
                email: "john.doe@email.com",
                phone: "+1 234 567 8901",
                subject: "Mathematics",
                level: "Intermediate",
                sessions: "12/20",
                status: "active",
                courses: ["Algebra", "Geometry", "Calculus"]
            },
            {
                id: 2,
                name: "Jane Smith",
                email: "jane.smith@email.com",
                phone: "+1 234 567 8902",
                subject: "English",
                level: "Advanced",
                sessions: "8/15",
                status: "active",
                courses: ["Literature", "Writing", "Grammar"]
            },
            {
                id: 3,
                name: "Mike Johnson",
                email: "mike.johnson@email.com",
                phone: "+1 234 567 8903",
                subject: "Science",
                level: "Beginner",
                sessions: "5/10",
                status: "pending",
                courses: ["Biology", "Chemistry"]
            },
            {
                id: 4,
                name: "Sarah Wilson",
                email: "sarah.wilson@email.com",
                phone: "+1 234 567 8904",
                subject: "History",
                level: "Intermediate",
                sessions: "15/20",
                status: "active",
                courses: ["World History", "American History"]
            },
            {
                id: 5,
                name: "Alex Brown",
                email: "alex.brown@email.com",
                phone: "+1 234 567 8905",
                subject: "Mathematics",
                level: "Advanced",
                sessions: "3/25",
                status: "concern",
                courses: ["Advanced Calculus", "Statistics"]
            }
        ];

        // Modal functions
        function openStudentModal(type) {
            const modal = document.getElementById('studentModal');
            const modalTitle = document.getElementById('modalTitle');
            const addSection = document.getElementById('addStudentSection');
            const removeSection = document.getElementById('removeStudentSection');
            
            if (type === 'add') {
                modalTitle.textContent = 'Add Student';
                addSection.style.display = 'block';
                removeSection.style.display = 'none';
            } else if (type === 'remove') {
                modalTitle.textContent = 'Remove Student';
                addSection.style.display = 'none';
                removeSection.style.display = 'block';
                populateStudentList();
            }
            
            modal.style.display = 'block';
        }

        function closeStudentModal() {
            const modal = document.getElementById('studentModal');
            modal.style.display = 'none';
            
            // Reset form
            document.getElementById('addStudentForm').reset();
            
            // Hide remove sections
            document.getElementById('removeAllSection').style.display = 'none';
            document.getElementById('removeSpecificSection').style.display = 'none';
        }

        // Form submission
        document.getElementById('addStudentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const studentData = {
                name: formData.get('studentName'),
                email: formData.get('studentEmail'),
                phone: formData.get('studentPhone'),
                subject: formData.get('studentSubject'),
                level: formData.get('studentLevel'),
                sessions: formData.get('sessionCount')
            };
            
            console.log('Adding student:', studentData);
            
            // Here you would typically send the data to your backend
            alert('Student added successfully!');
            closeStudentModal();
        });

        // Remove student functions
        function showRemoveAllCourses() {
            document.getElementById('removeAllSection').style.display = 'block';
            document.getElementById('removeSpecificSection').style.display = 'none';
            populateStudentList('all');
        }

        function showRemoveSpecificCourses() {
            document.getElementById('removeAllSection').style.display = 'none';
            document.getElementById('removeSpecificSection').style.display = 'block';
            populateStudentList('specific');
        }

        function populateStudentList(type = 'all') {
            const listContainer = type === 'all' ? 
                document.getElementById('allStudentsList') : 
                document.getElementById('specificStudentsList');
            
            listContainer.innerHTML = '';
            
            studentData.forEach(student => {
                const studentItem = createStudentItem(student, type);
                listContainer.appendChild(studentItem);
            });
        }

        function createStudentItem(student, type) {
            const div = document.createElement('div');
            div.className = 'student-item';
            div.innerHTML = `
                <div class="student-info">
                    <div class="student-header">
                        <span class="student-name">${student.name}</span>
                        <span class="student-status status-${student.status}">${student.status}</span>
                    </div>
                    <div class="student-details">
                        <div class="detail-row">
                            <span class="label">Email:</span>
                            <span class="value">${student.email}</span>
                        </div>
                        <div class="detail-row">
                            <span class="label">Subject:</span>
                            <span class="value">${student.subject}</span>
                        </div>
                        <div class="detail-row">
                            <span class="label">Level:</span>
                            <span class="value">${student.level}</span>
                        </div>
                        <div class="detail-row">
                            <span class="label">Sessions:</span>
                            <span class="value">${student.sessions}</span>
                        </div>
                        ${type === 'specific' ? `
                        <div class="detail-row">
                            <span class="label">Courses:</span>
                            <span class="value">${student.courses.join(', ')}</span>
                        </div>
                        ` : ''}
                    </div>
                </div>
                <div class="student-actions">
                    ${type === 'all' ? `
                    <button class="btn btn-danger remove-btn" onclick="removeStudent(${student.id})">
                        <i class="fas fa-trash"></i>
                        Remove All
                    </button>
                    ` : `
                    <button class="btn btn-danger remove-btn" onclick="removeSpecificCourse(${student.id})">
                        <i class="fas fa-minus-circle"></i>
                        Remove Course
                    </button>
                    `}
                </div>
            `;
            return div;
        }

        // Filter functions
        function filterStudents() {
            // Implementation for filtering students
            console.log('Filtering students');
        }

        function filterSpecificCourses() {
            // Implementation for filtering specific courses
            console.log('Filtering specific courses');
        }

        // Search functions
        document.getElementById('searchAllStudents')?.addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const studentItems = document.querySelectorAll('#allStudentsList .student-item');
            
            studentItems.forEach(item => {
                const studentName = item.querySelector('.student-name').textContent.toLowerCase();
                const studentEmail = item.querySelector('.detail-row .value').textContent.toLowerCase();
                
                if (studentName.includes(searchTerm) || studentEmail.includes(searchTerm)) {
                    item.style.display = 'flex';
                } else {
                    item.style.display = 'none';
                }
            });
        });

        document.getElementById('searchSpecificStudents')?.addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const studentItems = document.querySelectorAll('#specificStudentsList .student-item');
            
            studentItems.forEach(item => {
                const studentName = item.querySelector('.student-name').textContent.toLowerCase();
                const studentEmail = item.querySelector('.detail-row .value').textContent.toLowerCase();
                
                if (studentName.includes(searchTerm) || studentEmail.includes(searchTerm)) {
                    item.style.display = 'flex';
                } else {
                    item.style.display = 'none';
                }
            });
        });

        // Remove functions
        function handleRemoveAllCourses() {
            if (confirm('Are you sure you want to remove all courses for all students? This action cannot be undone.')) {
                console.log('Removing all courses for all students');
                alert('All courses removed successfully!');
                closeStudentModal();
            }
        }

        function handleRemoveSpecificCourse() {
            if (confirm('Are you sure you want to remove the selected courses? This action cannot be undone.')) {
                console.log('Removing specific courses');
                alert('Selected courses removed successfully!');
                closeStudentModal();
            }
        }

        function removeStudent(studentId) {
            if (confirm('Are you sure you want to remove all courses for this student?')) {
                console.log('Removing all courses for student:', studentId);
                // Remove student logic here
            }
        }

        function removeSpecificCourse(studentId) {
            console.log('Removing specific course for student:', studentId);
            // Remove specific course logic here
        }

        // Filter event listeners
        document.getElementById('statusFilter').addEventListener('change', filterStudents);
        document.getElementById('subjectFilter').addEventListener('change', filterStudents);
        document.getElementById('levelFilter').addEventListener('change', filterStudents);

        // Student Highlight Modal Functions
        function openStudentHighlight(studentName) {
            const modal = document.getElementById('highlightModal');
            const nameElement = document.getElementById('highlightStudentName');
            nameElement.textContent = `${studentName} - Weekly Highlights`;
            modal.style.display = 'block';
        }
        
        function closeHighlightModal() {
            const modal = document.getElementById('highlightModal');
            modal.style.display = 'none';
        }
        
        function exportHighlights() {
            // In a real implementation, this would generate and download a report
            alert('Highlight report exported successfully!');
        }
        
        // Student Details Modal Functions
        function openStudentDetails(studentName = 'Selected Student') {
            const modal = document.getElementById('studentDetailsModal');
            const studentNameElement = document.getElementById('detailsStudentName');
            
            // Set student name
            studentNameElement.textContent = `${studentName} - Details`;
            
            // Show modal
            modal.style.display = 'block';
            
            // Initialize subject selector with student's subjects
            initializeSubjectSelector(studentName);
            
            // Initialize with first tab active
            switchTab('attendance');
            
            // Load student data
            loadStudentData();
        }
        
        function closeStudentDetailsModal() {
            document.getElementById('studentDetailsModal').style.display = 'none';
        }
        
        function initializeSubjectSelector(studentName) {
            const subjectSelector = document.getElementById('subjectSelector');
            
            // Sample subjects based on student - in real implementation, this would come from your database
            const studentSubjects = {
                'John Doe': ['Mathematics', 'Physics', 'Chemistry'],
                'Jane Smith': ['English Literature', 'Creative Writing', 'History'],
                'Mike Johnson': ['Biology', 'Chemistry', 'Environmental Science'],
                'Sarah Wilson': ['World History', 'Geography', 'Social Studies'],
                'Alex Brown': ['Advanced Mathematics', 'Statistics', 'Computer Science']
            };
            
            const subjects = studentSubjects[studentName] || ['Mathematics', 'English', 'Science'];
            
            // Clear and populate subject selector
            subjectSelector.innerHTML = '<option value="">Choose a subject...</option>';
            subjects.forEach(subject => {
                const option = document.createElement('option');
                option.value = subject.toLowerCase().replace(/\s+/g, '-');
                option.textContent = subject;
                subjectSelector.appendChild(option);
            });
            
            // Select first subject by default
            if (subjects.length > 0) {
                subjectSelector.value = subjects[0].toLowerCase().replace(/\s+/g, '-');
                switchSubjectContent();
            }
        }
        
        function switchTab(tabName) {
            // Remove active class from all tabs and panels
            document.querySelectorAll('.tab-button').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.content-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            
            // Add active class to selected tab and panel
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            document.getElementById(`${tabName}-content`).classList.add('active');
        }
        
        function switchSubjectContent() {
            const selectedSubject = document.getElementById('subjectSelector').value;
            console.log('Subject changed to:', selectedSubject);
            
            // Load data for the selected subject
            loadStudentData(selectedSubject);
        }
        
        function loadStudentData(subject = 'mathematics') {
            // This function would typically fetch data from your backend
            // For now, we'll use sample data
            
            updateAttendanceData(subject);
            updateNotesData(subject);
            updateLessonContentData(subject);
            updateReportsData(subject);
        }
        
        function updateAttendanceData(subject) {
            // Sample attendance data - in real implementation, this would come from your database
            const attendanceData = {
                'mathematics': { rate: 92, attended: 22, missed: 2 },
                'english-literature': { rate: 88, attended: 18, missed: 3 },
                'biology': { rate: 95, attended: 19, missed: 1 },
                'world-history': { rate: 85, attended: 17, missed: 3 },
                'advanced-mathematics': { rate: 78, attended: 14, missed: 4 }
            };
            
            const data = attendanceData[subject] || attendanceData['mathematics'];
            
            // Update attendance statistics
            const statItems = document.querySelectorAll('#attendance-content .stat-item');
            if (statItems.length >= 3) {
                statItems[0].querySelector('.stat-number').textContent = data.rate + '%';
                statItems[1].querySelector('.stat-number').textContent = data.attended;
                statItems[2].querySelector('.stat-number').textContent = data.missed;
            }
        }
        
        function updateNotesData(subject) {
            // Sample notes data
            const notesData = {
                'mathematics': [
                    {
                        date: 'Dec 20, 2023',
                        author: 'Purple Ruler Teacher',
                        content: `<div class="note-section">
                            <h5><i class="fas fa-star"></i> Strengths:</h5>
                            <ol>
                                <li>Strong understanding of place value and accurate execution of calculations involving addition, subtraction, multiplication, and division.</li>
                                <li>Confident with basic algebraic calculations and able to apply methods correctly.</li>
                                <li>Good conceptual grasp of place value, supporting logical problem-solving.</li>
                            </ol>
                        </div>
                        <div class="note-section">
                            <h5><i class="fas fa-exclamation-circle"></i> Areas for Improvement:</h5>
                            <ol>
                                <li>Plotting</li>
                                <li>Makes occasional errors in fraction operations</li>
                                <li>Coordinates</li>
                            </ol>
                        </div>`
                    }
                ],
                'english-literature': [
                    {
                        date: 'Dec 18, 2023',
                        author: 'Purple Ruler Teacher',
                        content: `<div class="note-section">
                            <h5><i class="fas fa-star"></i> Strengths:</h5>
                            <ol>
                                <li>Excellent reading comprehension and analytical skills.</li>
                                <li>Strong vocabulary and creative writing abilities.</li>
                                <li>Active participation in class discussions and debates.</li>
                            </ol>
                        </div>
                        <div class="note-section">
                            <h5><i class="fas fa-exclamation-circle"></i> Areas for Improvement:</h5>
                            <ol>
                                <li>Essay structure and organization</li>
                                <li>Grammar and punctuation accuracy</li>
                                <li>Time management during writing tasks</li>
                            </ol>
                        </div>`
                    }
                ],
                'biology': [
                    {
                        date: 'Dec 15, 2023',
                        author: 'Purple Ruler Teacher',
                        content: `<div class="note-section">
                            <h5><i class="fas fa-star"></i> Strengths:</h5>
                            <ol>
                                <li>Excellent understanding of cellular biology and molecular processes.</li>
                                <li>Outstanding laboratory skills and attention to detail.</li>
                                <li>Strong ability to connect theoretical concepts with practical applications.</li>
                            </ol>
                        </div>
                        <div class="note-section">
                            <h5><i class="fas fa-exclamation-circle"></i> Areas for Improvement:</h5>
                            <ol>
                                <li>Scientific report writing and data analysis</li>
                                <li>Memorization of complex biological terminology</li>
                                <li>Speed in completing practical assessments</li>
                            </ol>
                        </div>`
                    }
                ]
            };
            
            const notes = notesData[subject] || notesData['mathematics'];
            const notesSection = document.querySelector('#notes-content .notes-section');
            
            // Clear existing notes (except the add note section)
            const existingNotes = notesSection.querySelectorAll('.note-item');
            existingNotes.forEach(note => note.remove());
            
            // Add new notes
            const addNoteSection = notesSection.querySelector('.add-note-section');
            notes.forEach(note => {
                const noteElement = document.createElement('div');
                noteElement.className = 'note-item';
                noteElement.innerHTML = `
                    <div class="note-header">
                        <span class="note-date">${note.date}</span>
                        <span class="note-author">${note.author}</span>
                    </div>
                    <div class="note-content">${note.content}</div>
                `;
                notesSection.insertBefore(noteElement, addNoteSection);
            });
        }
        
        function updateLessonContentData(subject) {
            // Sample lesson content data
            const lessonData = {
                'mathematics': [
                    { title: 'Algebra Fundamentals', status: 'completed', progress: 100 },
                    { title: 'Geometry Basics', status: 'in-progress', progress: 75 },
                    { title: 'Trigonometry', status: 'pending', progress: 0 }
                ],
                'english-literature': [
                    { title: 'Shakespeare Studies', status: 'completed', progress: 100 },
                    { title: 'Modern Poetry', status: 'in-progress', progress: 60 }
                ],
                'biology': [
                    { title: 'Cell Biology', status: 'completed', progress: 100 },
                    { title: 'Genetics', status: 'in-progress', progress: 45 }
                ]
            };
            
            const modules = lessonData[subject] || lessonData['mathematics'];
            const modulesContainer = document.querySelector('#content-content .content-modules');
            
            // Clear existing modules
            modulesContainer.innerHTML = '';
            
            // Add new modules
            modules.forEach(module => {
                const moduleElement = document.createElement('div');
                moduleElement.className = `module-item ${module.status}`;
                moduleElement.innerHTML = `
                    <div class="module-header">
                        <i class="fas ${module.status === 'completed' ? 'fa-check-circle' : module.status === 'in-progress' ? 'fa-play-circle' : 'fa-clock'}"></i>
                        <span class="module-title">${module.title}</span>
                        <span class="module-status">${module.status.replace('-', ' ').toUpperCase()}</span>
                    </div>
                    <div class="module-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${module.progress}%"></div>
                        </div>
                        <span class="progress-text">${module.progress}%</span>
                    </div>
                `;
                modulesContainer.appendChild(moduleElement);
            });
        }
        
        function updateReportsData(subject) {
            // Sample reports data based on subject
            const reportsData = {
                'mathematics': {
                    session: { password: 'StudentSession2024' }
                },
                'english-literature': {
                    session: { password: 'StudentSession2024' }
                },
                'biology': {
                    session: { password: 'StudentSession2024' }
                }
            };
            
            const data = reportsData[subject] || reportsData['mathematics'];
            
            // Update session report password
            const passwordElement = document.querySelector('#reports-content .report-password');
            if (passwordElement) {
                passwordElement.textContent = data.session?.password || 'StudentSession2024';
            }
        }
        
        function addNote() {
            const textarea = document.querySelector('#notes-content .add-note-section textarea');
            const noteContent = textarea.value.trim();
            
            if (noteContent) {
                const notesSection = document.querySelector('#notes-content .notes-section');
                const addNoteSection = notesSection.querySelector('.add-note-section');
                
                const noteElement = document.createElement('div');
                noteElement.className = 'note-item';
                noteElement.innerHTML = `
                    <div class="note-header">
                        <span class="note-date">${new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' })}</span>
                        <span class="note-author">Current User</span>
                    </div>
                    <div class="note-content">${noteContent}</div>
                `;
                
                notesSection.insertBefore(noteElement, addNoteSection);
                textarea.value = '';
                
                alert('Note added successfully!');
            } else {
                alert('Please enter a note before adding.');
            }
        }
        
        function exportStudentReport() {
            const studentName = document.getElementById('detailsStudentName').textContent;
            const selectedSubject = document.getElementById('subjectSelector').value;
            
            // In a real implementation, this would generate and download a comprehensive report
            alert(`Exporting detailed report for ${studentName} - Subject: ${selectedSubject}`);
        }
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            const highlightModal = document.getElementById('highlightModal');
            const studentModal = document.getElementById('studentModal');
            const studentDetailsModal = document.getElementById('studentDetailsModal');
            
            if (event.target === highlightModal) {
                closeHighlightModal();
            }
            if (event.target === studentModal) {
                closeStudentModal();
            }
            if (event.target === studentDetailsModal) {
                closeStudentDetailsModal();
            }
        }

        // Function to update form subject options
        function updateFormSubjectOptions(type) {
            const subjectSelect = document.getElementById('studentSubject');
            const subjectLabel = document.getElementById('subject-form-label');
            
            if (subjectSelect && subjectLabel) {
                // Clear existing options except the first one
                subjectSelect.innerHTML = '<option value="">Select Subject</option>';
                
                if (type === 'alternative') {
                    subjectLabel.textContent = 'Curriculum';
                    subjectSelect.innerHTML += `
                        <option value="core-subjects">Core Subjects</option>
                        <option value="core-subjects-plus">Core Subjects + PSHE Careers + PE and Art</option>
                        <option value="all-subjects-therapy">All Subjects + Therapy</option>
                        <option value="purple-ruler-blueprint">Purple Ruler Blueprint</option>
                    `;
                } else {
                    subjectLabel.textContent = 'Subject';
                    subjectSelect.innerHTML += `
                        <option value="mathematics">Mathematics</option>
                        <option value="english">English</option>
                        <option value="science">Science</option>
                        <option value="history">History</option>
                        <option value="geography">Geography</option>
                        <option value="physics">Physics</option>
                        <option value="chemistry">Chemistry</option>
                        <option value="biology">Biology</option>
                        <option value="art">Art</option>
                        <option value="music">Music</option>
                        <option value="french">French</option>
                    `;
                }
            }
        }

        // Student Type Tab Functions
        function switchStudentType(type) {
            // Update active tab
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-tab="${type}"]`).classList.add('active');
            
            // Update table header based on student type
            const subjectHeader = document.getElementById('subject-header');
            if (subjectHeader) {
                subjectHeader.textContent = type === 'alternative' ? 'Curriculum' : 'Subject';
            }
            
            // Update form subject options
            updateFormSubjectOptions(type);
            
            // Filter students based on type
            const rows = document.querySelectorAll('.students-table tbody tr');
            let visibleCount = 0;
            let activeCount = 0;
            let pendingCount = 0;
            let attentionCount = 0;
            
            rows.forEach(row => {
                const studentType = row.getAttribute('data-student-type') || 'tutoring';
                
                if (studentType === type) {
                    row.style.display = '';
                    visibleCount++;
                    
                    // Count status types
                    const statusBadge = row.querySelector('.status-badge');
                    if (statusBadge) {
                        if (statusBadge.classList.contains('status-active')) activeCount++;
                        else if (statusBadge.classList.contains('status-pending')) pendingCount++;
                        else if (statusBadge.classList.contains('status-concern')) attentionCount++;
                    }
                } else {
                    row.style.display = 'none';
                }
            });
            
            // Update statistics
            document.getElementById('totalStudents').textContent = visibleCount;
            document.getElementById('activeStudents').textContent = activeCount;
            document.getElementById('pendingStudents').textContent = pendingCount;
            document.getElementById('attentionStudents').textContent = attentionCount;
            
            // Update table header count
            const tableHeader = document.getElementById('student-count');
            if (tableHeader) {
                const typeText = type === 'tutoring' ? 'tutoring students' : 
                               'alternative provision students';
                tableHeader.textContent = `${visibleCount} ${typeText} total`;
            }
        }
        
        // Initialize page
          document.addEventListener('DOMContentLoaded', function() {
              // Add data attributes to existing student rows
              const rows = document.querySelectorAll('.students-table tbody tr');
              rows.forEach((row, index) => {
                  // Assign student types: first 4 are alternative provision (AP students with curriculum), rest are tutoring
                  if (index < 4) {
                      row.setAttribute('data-student-type', 'alternative');
                  } else {
                      row.setAttribute('data-student-type', 'tutoring');
                  }
              });
              
              // Initialize with alternative provision students view
               switchStudentType('alternative');
               
               // Initialize form subject options
               updateFormSubjectOptions('alternative');
           });

        // Close modal when clicking outside
        window.addEventListener('click', function(event) {
            const modal = document.getElementById('studentModal');
            if (event.target === modal) {
                closeStudentModal();
            }
        });
    </script>
</body>
</html>