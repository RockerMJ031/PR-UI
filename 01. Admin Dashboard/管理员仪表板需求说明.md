# 管理员仪表板详细需求说明文档

> **文档版本**: 2.0  
> **创建日期**: 2025年1月21日  
> **最后更新**: 2025年1月21日  
> **维护者**: 系统管理员  
> **用途**: AI和程序员代码实现与审核标准  
> **状态**: 详细规范 📋

## 📋 目录

1. [概述](#概述)
2. [页面元素详细清单](#页面元素详细清单)
3. [功能交互详细规范](#功能交互详细规范)
4. [CMS数据库交互规范](#cms数据库交互规范)
5. [Lark接口调用规范](#lark接口调用规范)
6. [界面设计要求](#界面设计要求)
7. [代码实现验证清单](#代码实现验证清单)
8. [技术规范](#技术规范)

## 概述

本文档是管理员仪表板的完整技术实现规范，基于 `admin-dashboard.html` 设计和 `CMS_Database_Configuration_Guide.md` 数据结构。该文档为AI和程序员提供详细的实现标准，确保前端界面、后端逻辑和数据交互的准确实现。

### 核心目标
- 提供统一的管理员操作界面
- 实现学生、课程、财务、报告的综合管理
- 确保数据的实时同步和准确性
- 提供直观的统计数据展示
- 集成Lark Anycross外部系统

### 技术架构
- **前端**: Wix Editor + Velo JavaScript
- **数据库**: 11个CMS集合 (CMS-1 到 CMS-11)
- **外部集成**: Lark Anycross API
- **文件管理**: Wix Media Manager + EHCP文件处理
- **权限控制**: Wix Members & Admin权限

## 页面元素详细清单

### 1. 布局结构元素 (Layout Elements)

#### 1.1 主要容器 (Main Containers)
- **页面容器**: `adminDashboardPage`
  - 类型: Wix Page
  - 背景色: #f8f9fa
  - 权限: Admin Only

- **头部条带**: `headerStrip`
  - 类型: Wix Strip
  - 高度: 80px
  - 背景色: #ffffff
  - 边框: 底部1px solid #e9ecef

- **主内容条带**: `mainContentStrip`
  - 类型: Wix Strip
  - 高度: 填充剩余空间
  - 背景色: #f8f9fa
  - 内边距: 20px

- **侧边栏列**: `sidebarColumn`
  - 类型: Wix Column
  - 宽度: 250px
  - 背景色: #ffffff
  - 右边框: 1px solid #e9ecef
  - 内边距: 20px

- **主内容列**: `mainColumn`
  - 类型: Wix Column
  - 宽度: 填充剩余空间
  - 内边距: 20px

#### 1.2 网格布局 (Grid Layouts)
- **统计卡片网格**: `statisticsGrid`
  - 类型: Wix Grid
  - 列数: 4
  - 间距: 20px
  - 高度: 自动

- **操作卡片网格**: `actionCardsGrid`
  - 类型: Wix Grid
  - 列数: 3
  - 间距: 20px
  - 高度: 自动

- **定价方案网格**: `pricingGrid`
  - 类型: Wix Grid
  - 列数: 3
  - 间距: 20px
  - 高度: 自动

### 2. 导航元素 (Navigation Elements)

#### 2.1 用户信息区域
- **用户头像**: `userAvatar`
  - 类型: Wix Image
  - 尺寸: 60x60px
  - 形状: 圆形
  - 数据源: 当前登录用户头像

- **用户名文本**: `usernameText`
  - 类型: Wix Text
  - 字体: 16px, 粗体
  - 数据源: 当前登录用户名

- **用户角色文本**: `userRoleText`
  - 类型: Wix Text
  - 字体: 14px
  - 颜色: #6c757d
  - 数据源: 当前用户角色

#### 2.2 导航按钮
- **仪表板导航**: `dashboardNavBtn`
  - 类型: Wix Button
  - 文本: "Dashboard"
  - 宽度: 100%
  - 高度: 40px
  - 状态: 激活 (背景: #007bff, 文字: 白色)
  - 点击事件: 无 (当前页面)

- **学生管理导航**: `studentsNavBtn`
  - 类型: Wix Button
  - 文本: "Students"
  - 宽度: 100%
  - 高度: 40px
  - 背景: 透明
  - 悬停: #f8f9fa
  - 点击事件: 跳转到学生管理页面

- **课程管理导航**: `sessionsNavBtn`
  - 类型: Wix Button
  - 文本: "Sessions"
  - 宽度: 100%
  - 高度: 40px
  - 背景: 透明
  - 悬停: #f8f9fa
  - 点击事件: 跳转到课程管理页面

- **报告中心导航**: `reportsNavBtn`
  - 类型: Wix Button
  - 文本: "Reports"
  - 宽度: 100%
  - 高度: 40px
  - 背景: 透明
  - 悬停: #f8f9fa
  - 点击事件: 跳转到报告页面

- **财务管理导航**: `financeNavBtn`
  - 类型: Wix Button
  - 文本: "Finance"
  - 宽度: 100%
  - 高度: 40px
  - 背景: 透明
  - 悬停: #f8f9fa
  - 点击事件: 跳转到财务页面

- **设置导航**: `settingsNavBtn`
  - 类型: Wix Button
  - 文本: "Settings"
  - 宽度: 100%
  - 高度: 40px
  - 背景: 透明
  - 悬停: #f8f9fa
  - 点击事件: 跳转到设置页面

### 3. 学生类型切换元素 (Student Type Toggle)

- **辅导学生按钮**: `tutoringStudentsBtn`
  - 类型: Wix Button
  - 文本: "Tutoring Students"
  - 背景色: #17a2b8 (信息色)
  - 文字颜色: 白色
  - 点击事件: 切换到辅导学生视图

- **AP学生按钮**: `apStudentsBtn`
  - 类型: Wix Button
  - 文本: "Alternative Provision Students"
  - 背景色: #663399 (主色调)
  - 文字颜色: 白色
  - 点击事件: 切换到AP学生视图

### 4. 统计卡片元素 (Statistics Cards)

#### 4.1 学生总数卡片
- **容器**: `totalStudentsCard`
  - 类型: Wix Container
  - 背景: 白色
  - 左边框: 4px solid #007bff (蓝色)
  - 圆角: 8px
  - 阴影: 0 2px 10px rgba(0,0,0,0.1)

- **数值文本**: `totalStudentsValue`
  - 类型: Wix Text
  - 字体: 48px, 粗体
  - 颜色: #007bff
  - 数据源: CMS-7 Students集合总数

- **标签文本**: `totalStudentsLabel`
  - 类型: Wix Text
  - 文本: "Total Students"
  - 字体: 16px
  - 颜色: #6c757d

#### 4.2 活跃学生卡片
- **容器**: `activeStudentsCard`
  - 类型: Wix Container
  - 背景: 白色
  - 左边框: 4px solid #28a745 (绿色)
  - 圆角: 8px
  - 阴影: 0 2px 10px rgba(0,0,0,0.1)

- **数值文本**: `activeStudentsValue`
  - 类型: Wix Text
  - 字体: 48px, 粗体
  - 颜色: #28a745
  - 数据源: CMS-7 Students集合 (status = "active")

- **标签文本**: `activeStudentsLabel`
  - 类型: Wix Text
  - 文本: "Active Students"
  - 字体: 16px
  - 颜色: #6c757d

#### 4.3 待审批卡片
- **容器**: `pendingApprovalCard`
  - 类型: Wix Container
  - 背景: 白色
  - 左边框: 4px solid #ffc107 (黄色)
  - 圆角: 8px
  - 阴影: 0 2px 10px rgba(0,0,0,0.1)

- **数值文本**: `pendingApprovalValue`
  - 类型: Wix Text
  - 字体: 48px, 粗体
  - 颜色: #ffc107
  - 数据源: CMS-1 StudentRegistrations集合 (registrationStatus = "pending")

- **标签文本**: `pendingApprovalLabel`
  - 类型: Wix Text
  - 文本: "Pending Approval"
  - 字体: 16px
  - 颜色: #6c757d

#### 4.4 需要关注卡片
- **容器**: `needAttentionCard`
  - 类型: Wix Container
  - 背景: 白色
  - 左边框: 4px solid #dc3545 (红色)
  - 圆角: 8px
  - 阴影: 0 2px 10px rgba(0,0,0,0.1)

- **数值文本**: `needAttentionValue`
  - 类型: Wix Text
  - 字体: 48px, 粗体
  - 颜色: #dc3545
  - 数据源: CMS-10 Tickets集合 (ticketType = "safeguarding", status = "open")

- **标签文本**: `needAttentionLabel`
  - 类型: Wix Text
  - 文本: "Safeguarding Issues"
  - 字体: 16px
  - 颜色: #6c757d

### 5. 操作卡片元素 (Action Cards)

#### 5.1 课程管理卡片
- **容器**: `courseManagementCard`
  - 类型: Wix Container
  - 背景: 白色
  - 圆角: 12px
  - 阴影: 0 2px 10px rgba(0,0,0,0.1)
  - 内边距: 25px

- **标题**: `courseManagementTitle`
  - 类型: Wix Text
  - 文本: "Course Management"
  - 字体: 1.3rem, 700字重
  - 颜色: #663399

- **描述**: `courseManagementDesc`
  - 类型: Wix Text
  - 文本: "Manage course extensions, cancellations and new courses"
  - 字体: 0.95rem
  - 颜色: #6c757d

- **课程注册按钮**: `courseEnrollmentBtn`
  - 类型: Wix Button
  - 文本: "Course Enrolment"
  - 背景: #007bff
  - 点击事件: 打开Lark外部表单
  - Lark链接: 课程注册表单URL
  - **具体功能实现**:
    - 打开新窗口/标签页
    - 跳转到Lark Anycross课程注册表单
    - 表单数据自动同步到CMS-1 (StudentRegistrations集合)
    - 注册成功后更新课程统计数据

- **课程延期按钮**: `courseExtensionBtn`
  - 类型: Wix Button
  - 文本: "Course Extension"
  - 背景: #28a745
  - 点击事件: 打开课程延期模态框
  - **具体功能实现**:
    - 调用 `openCourseExtensionModal()` 函数
    - 显示课程信息：课程ID、当前结束日期、学生信息
    - 表单字段：
      - 延期结束日期 (extensionEndDate) - 必填
      - 更新的重点领域 (updatedFocusArea) - 必填文本域
      - 详细描述 (extensionDescription) - 必填文本域
    - 提交时调用 `submitExtensionRequest()` 函数
    - 数据保存到CMS-11 (CourseManagement集合)
    - 同步到Lark Anycross PRT Operation 02.Course Management

- **取消课程按钮**: `cancelCourseBtn`
  - 类型: Wix Button
  - 文本: "Cancel Course"
  - 背景: #dc3545
  - 点击事件: 打开课程取消模态框
  - **具体功能实现**:
    - 调用 `openCourseCancellationModal()` 函数
    - 显示两周通知要求警告
    - 课程选择下拉框：从CMS-3获取可取消课程
    - 取消开始日期：自动验证两周通知期
    - 取消原因文本域：必填字段
    - 确认取消时调用 `confirmCancellation()` 函数
    - 更新课程状态为"cancelled"
    - 同步到Lark Anycross系统

#### 5.2 辅导学生管理卡片
- **容器**: `tutoringStudentCard`
  - 类型: Wix Container
  - 背景: 白色
  - 圆角: 12px
  - 阴影: 0 2px 10px rgba(0,0,0,0.1)
  - 内边距: 25px

- **标题**: `tutoringStudentTitle`
  - 类型: Wix Text
  - 文本: "Tutoring Student"
  - 字体: 1.3rem, 700字重
  - 颜色: #663399

- **描述**: `tutoringStudentDesc`
  - 类型: Wix Text
  - 文本: "Manage tutoring student enrollment and sessions"
  - 字体: 0.95rem
  - 颜色: #6c757d

- **添加辅导学生按钮**: `addTutoringStudentBtn`
  - 类型: Wix Button
  - 文本: "Add Tutoring Student"
  - 背景: #28a745
  - 点击事件: 打开学生管理模态框
  - **具体功能实现**:
    - 调用 `openTutoringStudentModal()` 函数
    - 显示辅导学生信息表单：
      - 学生姓名 (studentName) - 必填文本输入
      - 邮箱地址 (studentEmail) - 必填邮箱输入
      - 电话号码 (studentPhone) - 必填电话输入
      - 年级选择 (gradeLevel) - 下拉选择
      - 辅导科目 (tutoringSubjects) - 多选复选框
      - 辅导频率 (sessionFrequency) - 下拉选择
      - 家长联系信息 (parentContact) - 文本输入
    - 提交时调用 `submitAddTutoringStudent()` 函数
    - 数据保存到CMS-7 (Students集合)
    - 设置studentType为"tutoring"
    - 自动生成学生ID和注册时间
    - 同步到Lark Anycross辅导学生管理系统

- **移除学生按钮**: `removeTutoringStudentBtn`
  - 类型: Wix Button
  - 文本: "Remove Student"
  - 背景: #dc3545
  - 点击事件: 打开辅导学生移除确认对话框
  - **具体功能实现**:
    - 调用 `openRemoveTutoringStudentModal()` 函数
    - 显示辅导学生列表供选择
    - 从CMS-7 (Students集合) 获取studentType="tutoring"的学生
    - 显示学生详细信息：姓名、年级、辅导科目、注册日期
    - 显示确认移除警告信息和影响说明
    - 确认后调用 `confirmRemoveTutoringStudent()` 函数
    - 更新学生状态为"inactive"而非物理删除
    - 保留历史辅导记录用于审计
    - 同步状态更新到Lark辅导管理系统

#### 5.3 AP学生管理卡片
- **容器**: `apStudentCard`
  - 类型: Wix Container
  - 背景: 白色
  - 圆角: 12px
  - 阴影: 0 2px 10px rgba(0,0,0,0.1)
  - 内边距: 25px

- **标题**: `apStudentTitle`
  - 类型: Wix Text
  - 文本: "Alternative Provision"
  - 字体: 1.3rem, 700字重
  - 颜色: #663399

- **描述**: `apStudentDesc`
  - 类型: Wix Text
  - 文本: "Manage AP students and specialized educational provision"
  - 字体: 0.95rem
  - 颜色: #6c757d

- **AP学生计数器**: `apStudentCount`
  - 类型: Wix Text
  - 字体: 24px, 粗体
  - 颜色: #663399
  - 数据源: CMS-7 Students集合 (isAP = true)

- **添加AP学生按钮**: `addAPStudentBtn`
  - 类型: Wix Button
  - 文本: "Add AP Student"
  - 背景: #663399
  - 点击事件: 打开AP学生注册模态框
  - **具体功能实现**:
    - 调用 `openAPStudentModal()` 函数
    - 显示AP学生注册表单：
      - 学生姓名 (apStudentName) - 必填文本输入
      - 学生年龄 (apStudentAge) - 必填数字输入
      - EHCP状态 (ehcpStatus) - 下拉选择 ("Yes", "No", "In Progress")
      - EHCP详情 (ehcpDetails) - 文本域 (当EHCP状态为"Yes"时必填)
      - 监护人姓名 (guardianName) - 必填文本输入
      - 监护人电话 (guardianPhone) - 必填电话输入
      - 监护人邮箱 (guardianEmail) - 必填邮箱输入
      - 社工姓名 (caseworkerName) - 文本输入
      - 社工电话 (caseworkerPhone) - 电话输入
      - 医疗背景 (medicalBackground) - 文本域
      - 教育背景 (educationalBackground) - 文本域
      - 教育计划选择 (selectedPlan) - 下拉选择
      - EHCP文件上传 (ehcpFileUpload) - 文件上传组件
      - 家庭课程监督 (homeSupervision) - 下拉选择
      - 长期支持需求 (longTermSupport) - 下拉选择
      - 附加问题/需求 (additionalQuestions) - 文本域
    - 提交时调用 `submitAPStudentRegistration()` 函数
    - 数据保存到CMS-7 (Students集合)，设置isAP=true
    - 文件上传到Wix Media Manager
    - 同步到Lark Anycross AP学生管理系统

- **移除AP学生按钮**: `removeAPStudentBtn`
  - 类型: Wix Button
  - 文本: "Remove Student"
  - 背景: #dc3545
  - 点击事件: 打开移除AP学生模态框
  - **具体功能实现**:
    - 调用 `openRemoveAPStudentModal()` 函数
    - 显示AP学生列表供选择
    - 从CMS-7 (Students集合) 获取isAP=true的学生
    - 显示学生详细信息：姓名、年龄、EHCP状态、注册日期
    - 显示特殊警告：AP学生移除需要额外确认
    - 要求输入移除原因 (removalReason) - 必填文本域
    - 确认后调用 `confirmRemoveAPStudent()` 函数
    - 更新学生状态为"inactive"并记录移除原因
    - 保留完整的AP学生历史记录
    - 同步状态更新到Lark AP学生管理系统

#### 5.4 工单管理卡片
- **容器**: `ticketManagementCard`
  - 类型: Wix Container
  - 背景: 白色
  - 圆角: 12px
  - 阴影: 0 2px 10px rgba(0,0,0,0.1)
  - 内边距: 25px

- **标题**: `ticketManagementTitle`
  - 类型: Wix Text
  - 文本: "Ticket Management"
  - 字体: 1.3rem, 700字重
  - 颜色: #663399

- **描述**: `ticketManagementDesc`
  - 类型: Wix Text
  - 文本: "Submit support tickets and check status"
  - 字体: 0.95rem
  - 颜色: #6c757d

- **提交工单按钮**: `submitTicketBtn`
  - 类型: Wix Button
  - 文本: "Submit Ticket"
  - 背景: #007bff
  - 点击事件: 打开Lark外部表单
  - Lark链接: 工单提交表单URL
  - **具体功能实现**:
    - 打开新窗口/标签页
    - 跳转到Lark Anycross工单提交表单
    - 表单包含字段：工单类型(category)、优先级(priority)、标题(title)、问题描述(description)、联系信息(client_id, clientName, email)
    - 提交后自动生成工单ID(ticketId)
    - 数据同步到CMS-10 (Tickets集合)
    - 发送确认邮件给提交者
    - 更新工单统计数据
    - 记录提交日期(submittedDate)和状态(status)设为"open"

- **检查状态按钮**: `checkTicketStatusBtn`
  - 类型: Wix Button
  - 文本: "Check Status"
  - 背景: #17a2b8
  - 点击事件: 查询CMS-10 Tickets集合
  - **具体功能实现**:
    - 调用 `checkTicketStatus()` 函数
    - 显示工单ID输入框
    - 从CMS-10 (Tickets集合) 查询工单信息
    - 显示工单详情：
      - 工单ID(ticketId)和提交时间(submittedDate)
      - 工单标题(title)、类型(category)和优先级(priority)
      - 当前状态(status): "open", "in_progress", "resolved", "closed"
      - 处理进度和预计完成时间
      - 最新评论(comments)和更新记录
      - 解决方案(resolution)和解决日期(resolvedDate)（如果已解决）
      - 完成总结(completionSummary)（如果已完成）
      - 关闭建议发送时间(proposeToCloseSendAt)（如果有）
    - 支持工单状态实时刷新
    - 提供工单历史记录查看
    - 显示与Lark同步状态(larkSyncStatus)和同步时间(larkSyncTime)

### 6. Lightbox模态框元素 (Lightbox Elements)

#### 6.1 课程管理Lightbox
- **Lightbox容器**: `courseManagementLightbox`
  - 类型: Wix Lightbox
  - 标题: "Course Management"
  - 尺寸: 800x600px
  - 背景: 白色
  - 关闭按钮: 右上角X按钮
  - **具体功能**: 调用 `closeCourseModal()` 函数关闭模态框

- **搜索栏**: `courseSearchInput`
  - 类型: Wix TextInput
  - 占位符: "搜索课程 (学生姓名、科目、班级ID)"
  - **具体功能**: 实时过滤课程列表，支持模糊搜索

- **课程列表容器**: `courseListContainer`
  - 类型: Wix Repeater
  - 数据源: CMS-3 Import86集合
  - **具体功能**:
    - 显示课程信息：课程ID、学生姓名、科目、状态
    - 每个课程项包含操作按钮：延期、取消、查看详情
    - 支持分页显示，每页20条记录
    - 实时更新课程状态

- **课程操作按钮组**:
  - **延期按钮**: 调用 `handleCourseAction('extend', courseId)`
  - **取消按钮**: 调用 `handleCourseAction('cancel', courseId)`
  - **详情按钮**: 调用 `handleCourseAction('details', courseId)`

- **批量操作区域**:
  - **全选复选框**: 选择所有可见课程
  - **批量延期按钮**: 批量处理选中课程的延期操作
  - **批量取消按钮**: 批量处理选中课程的取消操作

#### 6.2 学生管理Lightbox
- **Lightbox容器**: `studentManagementLightbox`
  - 类型: Wix Lightbox
  - 标题: "Student Management"
  - 尺寸: 800x700px
  - 背景: 白色

- **多状态容器**: `studentFormContainer`
  - 类型: Wix Multi-state Container
  - 状态1: 添加学生表单
  - 状态2: 移除学生表单
  - 状态3: 编辑学生表单
  - **具体功能**: 根据操作类型切换不同的表单界面

- **学生信息表单区域**:
  - **学生姓名输入**: `studentNameInput`
    - 类型: Wix Text Input
    - 占位符: "Student Name"
    - 必填: 是
    - 验证: 2-50个字符

  - **学生邮箱输入**: `studentEmailInput`
    - 类型: Wix Email Input
    - 占位符: "Student Email"
    - 验证: 邮箱格式
    - **具体功能**: 实时验证邮箱格式和重复性

  - **学生电话输入**: `studentPhoneInput`
    - 类型: Wix Phone Input
    - 占位符: "Student Phone"
    - 验证: 英国电话号码格式

  - **年级选择**: `gradeLevelDropdown`
    - 类型: Wix Dropdown
    - 选项: ["Year 1", "Year 2", ..., "Year 13", "Adult"]

  - **学生类型选择**: `studentTypeDropdown`
    - 类型: Wix Dropdown
    - 选项: ["tutoring", "ap", "both"]
    - **具体功能**: 根据选择显示不同的附加字段

  - **辅导科目选择**: `tutoringSubjectsCheckbox`
    - 类型: Wix Checkbox Group
    - 选项: ["Mathematics", "English", "Science", "History", "Geography"]
    - 显示条件: studentType包含"tutoring"

  - **EHCP状态**: `ehcpStatusDropdown`
    - 类型: Wix Dropdown
    - 选项: ["Yes", "No", "In Progress"]
    - 显示条件: studentType包含"ap"

- **操作按钮区域**:
  - **提交添加学生按钮**: `submitAddStudentBtn`
    - 类型: Wix Button
    - 文本: "Add Student"
    - 背景: #28a745
    - **具体功能**: 
      - 调用 `validateStudentForm()` 验证表单
      - 调用 `saveStudentToCMS()` 保存到CMS-7
      - 发送确认邮件给学生和家长
      - 更新统计数据

  - **更新学生按钮**: `updateStudentBtn`
    - 类型: Wix Button
    - 文本: "Update Student"
    - 背景: #007bff
    - **具体功能**: 更新现有学生信息

  - **删除学生按钮**: `deleteStudentBtn`
    - 类型: Wix Button
    - 文本: "Delete Student"
    - 背景: #dc3545
    - **具体功能**: 软删除学生记录，保留历史数据

#### 6.3 AP学生注册Lightbox
- **Lightbox容器**: `apStudentRegistrationLightbox`
  - 类型: Wix Lightbox
  - 标题: "AP Student Registration"
  - 尺寸: 900x800px
  - 背景: 白色
  - **具体功能**: 多步骤表单，支持保存草稿和断点续填

- **进度指示器**: `registrationProgressBar`
  - 类型: Wix Progress Bar
  - 步骤: ["基本信息", "监护人信息", "教育背景", "特殊需求", "确认提交"]
  - **具体功能**: 显示当前注册进度，支持步骤间跳转

- **第一步：基本信息**
  - **AP学生姓名输入**: `apStudentNameInput`
    - 类型: Wix Text Input
    - 占位符: "Student Full Name"
    - 必填: 是
    - 验证: 2-100个字符

  - **AP学生年龄输入**: `apStudentAgeInput`
    - 类型: Wix Number Input
    - 占位符: "Age"
    - 范围: 5-18
    - 必填: 是

  - **出生日期**: `studentDateOfBirth`
    - 类型: Wix Date Picker
    - 必填: 是
    - **具体功能**: 自动计算年龄，验证与年龄输入的一致性

  - **性别选择**: `studentGender`
    - 类型: Wix Radio Button Group
    - 选项: ["Male", "Female", "Other", "Prefer not to say"]

- **第二步：监护人信息**
  - **主要监护人信息**:
    - **监护人姓名**: `guardianNameInput`
    - **监护人电话**: `guardianPhoneInput`
    - **监护人邮箱**: `guardianEmailInput`
    - **与学生关系**: `relationshipToStudent`
      - 选项: ["Parent", "Guardian", "Carer", "Social Worker", "Other"]

  - **紧急联系人信息**:
    - **紧急联系人姓名**: `emergencyContactName`
    - **紧急联系人电话**: `emergencyContactPhone`
    - **与学生关系**: `emergencyContactRelationship`

- **第三步：教育背景**
  - **当前教育状态**: `currentEducationStatus`
    - 选项: ["Home Educated", "Excluded from School", "School Refuser", "Medical Needs", "Other"]

  - **上一所学校**: `previousSchool`
    - 类型: Wix Text Input
    - 占位符: "Previous School Name (if applicable)"

  - **离校原因**: `reasonForLeaving`
    - 类型: Wix Text Area
    - 行数: 3

  - **学术水平**: `academicLevel`
    - 类型: Wix Dropdown
    - 选项: ["Below Expected", "At Expected Level", "Above Expected", "Significantly Advanced"]

- **第四步：特殊需求**
  - **EHCP状态**: `ehcpStatusDropdown`
    - 选项: ["Yes - Current", "Yes - In Progress", "No - Not Required", "No - Declined"]

  - **EHCP详情**: `ehcpDetailsTextarea`
    - 显示条件: EHCP状态为"Yes"
    - 行数: 4
    - **具体功能**: 详细描述EHCP内容和特殊需求

  - **医疗信息**: `medicalInfoTextarea`
    - 占位符: "Any medical conditions, medications, or health considerations"
    - 行数: 4

  - **行为支持需求**: `behavioralSupportNeeds`
    - 类型: Wix Text Area
    - 占位符: "Describe any behavioral support needs or strategies"
    - 行数: 4

  - **学习支持需求**: `learningSupportNeeds`
    - 类型: Wix Text Area
    - 占位符: "Describe any learning support needs or accommodations"
    - 行数: 4

- **第五步：课程选择和确认**
  - **教育计划选择**: `educationPlanDropdown`
    - 选项: ["PRA - Core Subjects", "PRA - All Subjects", "PRA - All Subjects + Therapy", "Purple Ruler Blueprint"]
    - **具体功能**: 根据选择显示详细的课程内容和价格

  - **开始日期**: `courseStartDate`
    - 类型: Wix Date Picker
    - 最早日期: 当前日期+7天
    - **具体功能**: 验证开始日期的合理性

  - **家庭监督情况**: `homeLessonsWithoutSupervisionDropdown`
    - 问题: "Will your student(s) be accessing the lessons at home without adult supervision most of the time?"
    - 选项: ["Yes", "No"]
    - **具体功能**: 影响课程安排和支持级别

  - **预期支持时长**: `supportLongerThanFourWeeksDropdown`
    - 问题: "Is Purple Ruler expected to support the learner longer than four weeks?"
    - 选项: ["Yes", "No", "Uncertain"]

- **文件上传区域**:
  - **EHCP文件上传**: `ehcpFileUpload`
    - 类型: Wix Upload Button
    - 接受格式: PDF, DOC, DOCX
    - 最大大小: 10MB
    - **具体功能**: 
      - 文件预览功能
      - 上传进度显示
      - 文件重命名为标准格式
      - 自动病毒扫描

  - **其他相关文件**: `additionalDocuments`
    - 类型: Wix Multi-file Upload
    - 接受格式: PDF, DOC, DOCX, JPG, PNG
    - 最大文件数: 5
    - 单文件最大: 5MB

- **操作按钮区域**:
  - **保存草稿按钮**: `saveDraftBtn`
    - 类型: Wix Button
    - 文本: "Save Draft"
    - 背景: #6c757d
    - **具体功能**: 保存当前进度，支持稍后继续填写

  - **上一步按钮**: `previousStepBtn`
    - 类型: Wix Button
    - 文本: "Previous"
    - 背景: #17a2b8
    - **具体功能**: 返回上一步，保留已填写内容

  - **下一步按钮**: `nextStepBtn`
    - 类型: Wix Button
    - 文本: "Next"
    - 背景: #007bff
    - **具体功能**: 验证当前步骤后进入下一步

  - **提交注册按钮**: `registerAPStudentBtn`
    - 类型: Wix Button
    - 文本: "Submit Registration"
    - 背景: #663399
    - **具体功能**: 
      - 最终验证所有必填字段
      - 保存到CMS-1 StudentRegistrations集合
      - 同步到Lark Anycross系统
      - 发送确认邮件给监护人
      - 创建学生档案到CMS-7
      - 生成唯一学生ID
      - 触发后续流程（分配社工、安排评估等）

#### 6.4 移除AP学生Lightbox
- **Lightbox容器**: `removeAPStudentLightbox`
  - 类型: Wix Lightbox
  - 标题: "Remove AP Student"
  - 尺寸: 800x700px
  - 背景: 白色
  - **具体功能**: 安全的学生移除流程，包含多重确认和数据保护

- **搜索和筛选区域**:
  - **学生搜索框**: `studentSearchInput`
    - 类型: Wix Text Input
    - 占位符: "搜索学生姓名、ID或监护人信息"
    - **具体功能**: 实时搜索过滤学生列表

  - **状态筛选**: `statusFilterDropdown`
    - 类型: Wix Dropdown
    - 选项: ["All", "Active", "Paused", "On Hold"]
    - **具体功能**: 按状态筛选显示的学生

  - **课程筛选**: `courseFilterDropdown`
    - 类型: Wix Dropdown
    - 选项: 动态加载所有AP课程
    - **具体功能**: 按课程类型筛选学生

- **警告信息区域**:
  - **重要提示**: `importantNoticeText`
    - 类型: Wix Rich Text
    - 内容: "⚠️ 重要提示：移除AP学生是敏感操作，需要管理员权限确认"
    - 颜色: #dc3545
    - 字体: 16px, 粗体

  - **操作说明**: `operationInstructions`
    - 类型: Wix Rich Text
    - 内容: 详细的移除流程说明和注意事项
    - **具体功能**: 确保操作者了解移除的影响和后果

- **学生列表区域**:
  - **AP学生列表容器**: `apStudentsListContainer`
    - 类型: Wix Repeater
    - 数据源: CMS-7 Students集合 (isAP = true, status != "removed")
    - 布局: 卡片式垂直列表
    - **具体功能**: 
      - 分页显示，每页10个学生
      - 支持排序（按姓名、注册日期、状态）
      - 实时数据更新

  - **学生信息卡片**: `studentInfoCard` (重复元素)
    - 类型: Wix Container
    - 背景: #f8f9fa
    - 边框: 1px solid #dee2e6
    - 圆角: 12px
    - 内边距: 20px
    - 悬停效果: 轻微阴影增强

    - **学生头像**: `studentAvatar`
      - 类型: Wix Image
      - 尺寸: 60x60px
      - 形状: 圆形
      - 默认: 首字母头像

    - **学生基本信息**:
      - **姓名**: `studentNameText` - 18px, 粗体
      - **学生ID**: `studentIdText` - 14px, 灰色
      - **年龄**: `studentAgeText` - 14px
      - **注册日期**: `registrationDateText` - 12px, 灰色

    - **课程信息**:
      - **当前课程**: `currentCourseText` - 14px
      - **课程状态**: `courseStatusBadge` - 动态颜色徽章
      - **开始日期**: `courseStartDateText` - 12px
      - **预计结束**: `expectedEndDateText` - 12px

    - **监护人信息**:
      - **监护人姓名**: `guardianNameText` - 14px
      - **联系电话**: `guardianPhoneText` - 12px
      - **邮箱**: `guardianEmailText` - 12px

    - **特殊标识**:
      - **EHCP状态**: `ehcpStatusBadge` - 如果有EHCP显示特殊标识
      - **紧急关注**: `urgentAttentionFlag` - 如果需要特别关注显示红色标识

- **移除操作区域**:
  - **移除原因选择**: `removalReasonDropdown`
    - 类型: Wix Dropdown
    - 选项: ["Course Completion", "Family Request", "Behavioral Issues", "Medical Reasons", "Moved Away", "Other"]
    - 必填: 是
    - **具体功能**: 记录移除原因用于统计和审计

  - **详细说明**: `removalDetailsTextarea`
    - 类型: Wix Text Area
    - 占位符: "请详细说明移除原因和相关情况"
    - 行数: 4
    - 必填: 是
    - **具体功能**: 提供详细的移除背景信息

  - **数据保留选项**: `dataRetentionOptions`
    - 类型: Wix Checkbox Group
    - 选项: 
      - "保留学生档案用于审计" (默认选中，不可取消)
      - "保留课程记录和成绩"
      - "保留财务记录"
      - "保留通信记录"
    - **具体功能**: 确定哪些数据需要保留

  - **通知设置**: `notificationSettings`
    - 类型: Wix Checkbox Group
    - 选项:
      - "通知监护人移除决定"
      - "通知相关教师和社工"
      - "发送移除确认邮件"
    - **具体功能**: 控制移除通知的发送范围

- **确认和操作按钮**:
  - **预览移除影响**: `previewRemovalImpactBtn`
    - 类型: Wix Button
    - 文本: "Preview Impact"
    - 背景: #17a2b8
    - **具体功能**: 
      - 显示移除对系统的影响
      - 列出将要删除/保留的数据
      - 显示相关的课程、财务记录

  - **确认移除按钮**: `confirmRemovalBtn`
    - 类型: Wix Button
    - 文本: "Confirm Removal"
    - 背景: #dc3545
    - **具体功能**: 
      - 二次确认对话框
      - 要求输入管理员密码
      - 执行移除操作：
        - 更新学生状态为"removed"
        - 记录移除时间和操作者
        - 保存移除原因和详细说明
        - 根据设置保留/删除相关数据
        - 发送通知邮件
        - 更新统计数据
        - 同步到Lark系统
        - 生成移除报告

  - **取消操作按钮**: `cancelRemovalBtn`
    - 类型: Wix Button
    - 文本: "Cancel"
    - 背景: #6c757d
    - **具体功能**: 关闭模态框，不执行任何操作

- **操作日志区域**:
  - **最近移除记录**: `recentRemovalLog`
    - 类型: Wix Table
    - 显示: 最近10条移除记录
    - 列: 学生姓名、移除日期、操作者、移除原因
    - **具体功能**: 提供移除操作的审计追踪

### 7. 定价方案元素 (Pricing Plans)

#### 7.1 定价方案网格容器
- **容器**: `pricingPlansGrid`
  - 类型: Wix Grid
  - 列数: 4
  - 间距: 20px
  - 响应式: 移动端变为2列

#### 7.2 PRA核心科目方案卡片
- **容器**: `praCoreSubjectsCard`
  - 类型: Wix Container
  - 背景: 白色
  - 边框: 2px solid #e9ecef
  - 圆角: 12px
  - 内边距: 25px

- **方案标题**: `praCoreTitle`
  - 类型: Wix Text
  - 文本: "PRA - Core Subjects"
  - 字体: 1.4rem, 700字重
  - 颜色: #663399

- **价格显示**: `praCorePrice`
  - 类型: Wix Text
  - 文本: "£25/week"
  - 字体: 2rem, 粗体
  - 颜色: #28a745

- **功能列表**: `praCoreFeatures`
  - 类型: Wix Rich Text
  - 内容: 核心科目列表
  - 格式: 项目符号列表

- **选择按钮**: `selectPraCoreBtn`
  - 类型: Wix Button
  - 文本: "Select Plan"
  - 背景: #663399
  - 点击事件: 打开Lark外部表单
  - **具体功能实现**:
    - 调用 `selectPricingPlan('pra-core')` 函数
    - 预填充表单信息（方案类型、价格：£25/week）
    - 跳转到Lark Anycross课程注册表单
    - 传递UTM参数用于跟踪转化来源
    - 记录用户选择行为到CMS-9 (PR-Statistics集合)
    - 触发营销自动化流程和跟进邮件
    - 设置会话存储以便后续表单预填充

#### 7.3 PRA全科目方案卡片
- **容器**: `praAllSubjectsCard`
  - 类型: Wix Container
  - 背景: 白色
  - 边框: 2px solid #663399 (推荐方案)
  - 圆角: 12px
  - 内边距: 25px
  - 悬停效果: 轻微阴影增强和上移

- **推荐徽章**: `recommendedBadge`
  - 类型: Wix Text
  - 文本: "RECOMMENDED"
  - 背景: #663399
  - 文字颜色: 白色
  - 位置: 右上角
  - **具体功能**: 根据统计数据动态显示最受欢迎的方案

- **方案标题**: `praAllTitle`
  - 类型: Wix Text
  - 文本: "PRA - All Subjects"
  - 字体: 1.4rem, 700字重
  - 颜色: #663399

- **价格显示**: `praAllPrice`
  - 类型: Wix Text
  - 文本: "£35/week"
  - 字体: 2rem, 粗体
  - 颜色: #28a745
  - **具体功能**: 动态显示当前价格，支持促销价格和折扣显示

- **功能列表**: `praAllFeatures`
  - 类型: Wix Rich Text
  - 内容: 
    - ✓ 所有核心和选修科目
    - ✓ 个性化学习路径
    - ✓ 每日进度跟踪
    - ✓ 专属学习顾问
    - ✓ 家长每周报告
    - ✓ 在线答疑支持
  - **具体功能**: 从CMS数据库动态加载最新的方案特性

- **选择按钮**: `selectPraAllBtn`
  - 类型: Wix Button
  - 文本: "Select Plan"
  - 背景: #663399
  - 点击事件: 打开Lark外部表单
  - **具体功能实现**:
    - 调用 `selectPricingPlan('pra-all')` 函数
    - 预填充表单信息（方案类型、价格：£35/week）
    - 跳转到Lark Anycross课程注册表单
    - 传递推荐方案标识用于优先处理
    - 记录选择行为和转化数据
    - 触发专门的推荐方案跟进流程

- **联系按钮**: `contactPraAllBtn`
  - 类型: Wix Button
  - 文本: "Contact Us"
  - 背景: #6c757d
  - **具体功能实现**:
    - 调用 `contactAboutPlan('pra-all')` 函数
    - 打开专门的咨询表单
    - 预填充咨询主题为"PRA全科目方案咨询"
    - 自动分配给高级销售顾问
    - 设置高优先级处理标识

#### 7.4 PRA全科目+治疗方案卡片
- **容器**: `praAllTherapyCard`
  - 类型: Wix Container
  - 背景: 白色
  - 边框: 2px solid #e9ecef
  - 圆角: 12px
  - 内边距: 25px
  - 悬停效果: 边框颜色变为#663399

- **专业标签**: `therapySpecialtyBadge`
  - 类型: Wix Text
  - 文本: "THERAPY INCLUDED"
  - 背景: #17a2b8
  - 文字颜色: 白色
  - 位置: 右上角
  - **具体功能**: 突出显示治疗服务特色

- **方案标题**: `praAllTherapyTitle`
  - 类型: Wix Text
  - 文本: "PRA - All Subjects + Therapy"
  - 字体: 1.4rem, 700字重
  - 颜色: #663399

- **价格显示**: `praAllTherapyPrice`
  - 类型: Wix Text
  - 文本: "£45/week"
  - 字体: 2rem, 粗体
  - 颜色: #28a745
  - **具体功能**: 显示包含治疗服务的综合价格

- **功能列表**: `praTherapyFeatures`
  - 类型: Wix Rich Text
  - 内容: 
    - ✓ 所有PRA全科目内容
    - ✓ 专业言语治疗
    - ✓ 职业治疗支持
    - ✓ 心理健康咨询
    - ✓ 个性化治疗计划
    - ✓ 治疗师定期评估
    - ✓ 家庭治疗指导
  - **具体功能**: 动态加载治疗服务详情

- **选择按钮**: `selectPraTherapyBtn`
  - 类型: Wix Button
  - 文本: "Select Plan"
  - 背景: #663399
  - **具体功能实现**:
    - 调用 `selectPricingPlan('pra-therapy')` 函数
    - 预填充表单信息（方案类型、价格：£45/week）
    - 跳转到专门的治疗方案注册表单
    - 包含治疗需求评估问卷
    - 自动安排治疗师初步评估
    - 记录特殊需求学生注册数据
    - 触发治疗团队通知流程

- **联系按钮**: `contactPraTherapyBtn`
  - 类型: Wix Button
  - 文本: "Contact Therapy Team"
  - 背景: #17a2b8
  - **具体功能实现**:
    - 调用 `contactTherapyTeam()` 函数
    - 直接连接到治疗团队专线
    - 预约治疗需求评估
    - 提供治疗方案详细咨询
    - 安排家庭访问或在线评估

#### 7.5 Purple Ruler Blueprint方案卡片
- **容器**: `purpleRulerBlueprintCard`
  - 类型: Wix Container
  - 背景: 线性渐变 (#663399 到 #8a2be2)
  - 文字颜色: 白色
  - 圆角: 12px
  - 内边距: 25px
  - 悬停效果: 渐变色彩增强，轻微发光效果
  - 动画: 背景渐变缓慢移动

- **高端标签**: `premiumBadge`
  - 类型: Wix Text
  - 文本: "PREMIUM SOLUTION"
  - 背景: #ffd700
  - 文字颜色: #663399
  - 位置: 右上角
  - 字体: 粗体，小号
  - **具体功能**: 突出显示高端定制服务

- **方案标题**: `blueprintTitle`
  - 类型: Wix Text
  - 文本: "Purple Ruler Blueprint"
  - 字体: 1.4rem, 700字重
  - 颜色: 白色
  - 文字阴影: 0 2px 4px rgba(0,0,0,0.3)

- **副标题**: `blueprintSubtitle`
  - 类型: Wix Text
  - 文本: "Complete Educational Transformation"
  - 字体: 1rem, 正常
  - 颜色: #e6e6fa
  - **具体功能**: 强调全面教育解决方案

- **价格显示**: `blueprintPrice`
  - 类型: Wix Text
  - 文本: "Custom Pricing"
  - 字体: 1.5rem, 粗体
  - 颜色: #ffd700
  - 文字阴影: 0 1px 2px rgba(0,0,0,0.5)
  - **具体功能**: 根据需求定制价格方案

- **特色服务列表**: `blueprintFeatures`
  - 类型: Wix Rich Text
  - 文字颜色: 白色
  - 内容: 
    - ⭐ 完全定制化教育方案
    - ⭐ 1对1专属教育顾问
    - ⭐ 全方位学习支持团队
    - ⭐ 家庭教育环境设计
    - ⭐ 长期教育规划咨询
    - ⭐ 24/7紧急支持热线
  - **具体功能**: 展示高端服务的独特价值

- **咨询按钮**: `consultBlueprintBtn`
  - 类型: Wix Button
  - 文本: "Book Consultation"
  - 背景: #ffd700
  - 文字颜色: #663399
  - 字体: 粗体
  - 悬停效果: 背景变为白色
  - **具体功能实现**:
    - 调用 `bookBlueprintConsultation()` 函数
    - 跳转到高端咨询预约系统
    - 自动安排与高级教育顾问的会议
    - 预填充Blueprint咨询表单
    - 发送确认邮件和日历邀请
    - 准备个性化咨询材料
    - 设置VIP客户标识

- **联系按钮**: `contactForBlueprintBtn`
  - 类型: Wix Button
  - 文本: "Contact Us"
  - 背景: 透明
  - 边框: 2px solid 白色
  - 文字颜色: 白色
  - 悬停效果: 背景变为白色，文字变为#663399
  - **具体功能实现**:
    - 调用 `contactBlueprintTeam()` 函数
    - 直接连接到Blueprint专属团队
    - 打开高端服务咨询表单
    - 预填充咨询类型为"Blueprint定制方案"
    - 自动分配给首席教育顾问
    - 设置最高优先级处理
    - 触发VIP客户服务流程
    - 安排48小时内回复承诺

## 四、页面行为规范

### 1. 页面加载行为

#### 1.1 初始化序列
1. **页面框架加载** (0-500ms)
   - 显示页面骨架屏
   - 加载基础布局元素
   - 初始化导航组件

2. **数据获取阶段** (500-2000ms)
   - 并行查询所有CMS集合
   - 获取用户权限信息
   - 加载统计数据

3. **内容渲染阶段** (2000-3000ms)
   - 渲染统计卡片数据
   - 显示操作卡片
   - 加载定价方案

4. **交互就绪** (3000ms后)
   - 启用所有按钮和表单
   - 开始实时数据更新
   - 显示加载完成状态

#### 1.2 错误处理
- **网络错误**: 显示重试按钮和错误消息
- **数据为空**: 显示友好的空状态提示
- **权限不足**: 重定向到登录页面
- **超时处理**: 5秒后显示超时提示

### 2. 用户交互行为

#### 2.1 统计卡片交互
- **悬停效果**: 卡片轻微上升 (transform: translateY(-2px))，阴影增强
- **点击行为**: 根据卡片类型执行相应操作
  - **学生总数卡片**: 
    - 调用 `openStudentsList()` 函数
    - 跳转到学生管理页面
    - 显示所有学生的详细列表
    - 包含搜索和筛选功能
  - **活跃学生卡片**: 
    - 调用 `openActiveStudentsView()` 函数
    - 打开活跃学生筛选视图
    - 显示当前正在上课的学生
    - 包含课程进度和状态信息
  - **待审批卡片**: 
    - 调用 `openApprovalQueue()` 函数
    - 打开审批队列页面
    - 显示待处理的注册申请
    - 提供批量审批功能
  - **需要关注卡片**: 
    - 调用 `openAttentionList()` 函数
    - 打开关注事项列表
    - 显示需要特别关注的学生
    - 按优先级排序显示

#### 2.2 操作按钮交互
- **点击反馈**: 按钮按下效果 (transform: scale(0.98))，视觉确认
- **加载状态**: 
  - 显示旋转图标 (spinner)
  - 禁用按钮防止重复点击
  - 按钮文本变为"Processing..."
  - 设置最大加载时间30秒
- **成功反馈**: 
  - 绿色勾选图标 (✓)
  - 按钮背景变为绿色
  - 显示成功消息提示
  - 2秒后恢复原始状态
  - 触发相关数据刷新
- **错误反馈**: 
  - 红色警告图标 (⚠)
  - 按钮背景变为红色
  - 显示具体错误消息
  - 提供重试选项
  - 记录错误日志到CMS-5 (DataSyncLogs)
- **具体按钮行为**:
  - **管理课程按钮**: 调用 `handleCourseManagement()` 函数
  - **添加学生按钮**: 调用 `handleAddStudent()` 函数
  - **注册AP学生按钮**: 调用 `handleAPRegistration()` 函数
  - **提交工单按钮**: 调用 `handleTicketSubmission()` 函数
  - **检查状态按钮**: 调用 `handleStatusCheck()` 函数

#### 2.3 表单交互
- **实时验证**: 
  - 输入时即时验证字段格式和内容
  - 邮箱格式验证 (RFC 5322标准)
  - 电话号码格式验证 (英国格式)
  - 必填字段检查
  - 字符长度限制验证
  - 特殊字符过滤
- **错误提示**: 
  - 字段下方显示具体错误信息
  - 红色边框标识错误字段
  - 错误图标 (⚠) 显示
  - 多语言错误消息支持
  - 错误消息自动消失机制
- **自动保存**: 
  - 每30秒自动保存草稿到本地存储
  - 表单数据变更时触发保存
  - 网络中断时保持本地数据
  - 恢复时提示用户继续填写
  - 草稿保存状态指示器
- **提交确认**: 
  - 重要操作需要二次确认对话框
  - 显示操作影响和后果说明
  - 要求输入确认文本或密码
  - 提供取消和确认选项
  - 记录操作者和时间戳
- **具体表单功能**:
  - **学生注册表单**: 
    - 调用 `validateStudentForm()` 验证
    - 调用 `saveStudentData()` 保存数据
    - 同步到CMS-7 Students集合
  - **AP学生注册表单**: 
    - 多步骤表单验证
    - 文件上传进度显示
    - EHCP状态特殊验证
    - 同步到CMS-1 StudentRegistrations集合
  - **课程管理表单**: 
    - 课程冲突检查
    - 日期范围验证
    - 教师可用性检查
    - 同步到CMS-3 Import86集合

### 3. 数据更新行为

#### 3.1 实时更新策略
- **统计数据**: 
  - 每5分钟自动刷新统计卡片数据
  - 调用 `refreshStatistics()` 函数
  - 从CMS-7、CMS-1、CMS-10集合获取最新数据
  - 使用WebSocket连接实现实时推送
  - 数据变更时立即更新相关统计
- **学生状态**: 
  - 每2分钟检查学生状态更新
  - 调用 `checkStudentStatusUpdates()` 函数
  - 监控课程进度和学习状态
  - 检测EHCP状态变更
  - 更新需要关注的学生列表
- **工单状态**: 
  - 每1分钟检查工单状态更新
  - 调用 `checkTicketStatusUpdates()` 函数
  - 从CMS-10 Tickets集合获取状态变更
  - 实时显示处理进度
  - 推送紧急工单通知
- **文件上传**: 
  - 实时进度显示和状态更新
  - 调用 `trackFileUploadProgress()` 函数
  - 显示上传百分比和剩余时间
  - 文件处理状态实时反馈
  - 上传完成后自动刷新相关数据
- **Lark同步状态**:
  - 每10分钟检查Lark数据同步状态
  - 调用 `checkLarkSyncStatus()` 函数
  - 监控数据同步错误和延迟
  - 显示同步状态指示器
  - 记录同步日志到CMS-5集合

#### 3.2 缓存策略
- **本地缓存**: 
  - 统计数据缓存5分钟 (localStorage)
  - 学生基本信息缓存10分钟
  - 课程信息缓存15分钟
  - 定价方案信息缓存1小时
  - 使用时间戳验证缓存有效性
- **会话缓存**: 
  - 用户信息缓存整个会话 (sessionStorage)
  - 用户权限信息缓存整个会话
  - 导航状态和偏好设置缓存
  - 表单草稿数据缓存
  - 会话结束时自动清理
- **失效策略**: 
  - 数据变更时立即失效相关缓存
  - 调用 `invalidateCache(cacheKey)` 函数
  - 用户操作后刷新相关数据
  - 网络重连后验证缓存有效性
  - 定期清理过期缓存数据
- **缓存优化**:
  - 预加载常用数据到缓存
  - 压缩缓存数据减少存储空间
  - 智能预测用户需要的数据
  - 后台更新缓存不影响用户体验
  - 缓存命中率监控和优化

### 4. 权限控制行为

#### 4.1 角色权限
- **超级管理员**: 
  - 所有功能完全访问和系统管理权限
  - 可访问所有CMS集合数据
  - 可管理用户角色和权限
  - 可查看系统日志和审计记录
  - 可配置系统参数和集成设置
  - 可执行数据备份和恢复操作
  - 调用 `checkSuperAdminPermissions()` 验证权限
- **管理员**: 
  - 除系统设置外的所有功能
  - 可管理学生、课程、工单
  - 可查看统计数据和报告
  - 可处理AP学生注册和移除
  - 可管理定价方案和咨询
  - 不能修改系统配置和用户权限
  - 调用 `checkAdminPermissions()` 验证权限
- **教师**: 
  - 只读访问和基础操作权限
  - 可查看分配给自己的学生信息
  - 可管理自己负责的课程
  - 可提交工单和查看状态
  - 可查看相关统计数据
  - 不能访问财务和系统管理功能
  - 调用 `checkTeacherPermissions()` 验证权限
- **家长**: 
  - 仅自己孩子相关的信息访问权限
  - 可查看孩子的学习进度和课程安排
  - 可查看孩子的EHCP状态和文件
  - 可提交与孩子相关的工单
  - 可查看孩子的课程费用和支付状态
  - 不能访问其他学生信息或系统功能
  - 调用 `checkParentPermissions()` 验证权限

#### 4.2 功能权限检查
- **页面加载时**: 
  - 检查用户角色和权限 `checkUserPermissions()`
  - 从CMS-6 Users集合获取用户权限信息
  - 根据角色隐藏或禁用无权限的UI元素
  - 设置页面访问控制和功能可见性
  - 记录用户访问日志到CMS-5集合
  - 初始化权限相关的UI状态
- **操作执行前**: 
  - 验证操作权限 `validateOperationPermission(action)`
  - 检查用户是否有执行特定操作的权限
  - 验证数据访问范围和修改权限
  - 阻止未授权操作并显示权限错误
  - 记录权限验证失败的尝试
  - 提供友好的权限不足提示
- **数据显示时**: 
  - 根据权限过滤显示内容 `filterDataByPermission(data, userRole)`
  - 隐藏用户无权查看的敏感信息
  - 根据角色显示不同的数据视图
  - 实施字段级别的访问控制
  - 动态调整数据展示格式
  - 确保数据安全和隐私保护
- **API调用时**: 
  - 服务端再次验证权限 `validateAPIAccess(endpoint, userRole)`
  - 检查用户对特定API端点的访问权限
  - 验证请求参数和数据范围
  - 实施速率限制和访问控制
  - 记录API调用日志和安全事件
  - 防止权限绕过和数据泄露
- **会话管理**:
  - 定期验证会话有效性 `validateSession()`
  - 检测权限变更并更新会话
  - 实施会话超时和自动登出
  - 防止会话劫持和权限提升攻击
  - 记录会话安全事件和异常行为

## 六、验证检查清单

### 1. 页面元素验证

#### 1.1 布局结构检查
- [ ] 页面容器 `adminDashboardContainer` 正确创建
- [ ] 头部条带 `headerStrip` 包含所有必需元素
- [ ] 主内容条带 `mainContentStrip` 布局正确
- [ ] 侧边栏列 `sidebarColumn` 宽度和内容正确
- [ ] 主内容列 `mainContentColumn` 响应式布局正常

#### 1.2 导航元素检查
- [ ] 用户信息区域 `userInfoSection` 显示正确
- [ ] 用户头像 `userAvatar` 加载正常
- [ ] 用户姓名 `userName` 数据绑定正确
- [ ] 用户角色 `userRole` 显示准确
- [ ] 导航按钮组 `navButtonGroup` 功能完整
- [ ] 仪表板按钮 `dashboardNavBtn` 激活状态正确
- [ ] 学生按钮 `studentsNavBtn` 链接正确
- [ ] 课程按钮 `coursesNavBtn` 链接正确
- [ ] 报告按钮 `reportsNavBtn` 链接正确
- [ ] 设置按钮 `settingsNavBtn` 权限控制正确

#### 1.3 统计卡片检查
- [ ] 统计卡片网格 `statsCardsGrid` 布局正确
- [ ] 学生总数卡片 `totalStudentsCard` 数据准确
- [ ] 活跃学生卡片 `activeStudentsCard` 计算正确
- [ ] 待审批卡片 `pendingApprovalsCard` 状态正确
- [ ] 需要关注卡片 `needsAttentionCard` 优先级正确
- [ ] 所有数值 `statValue` 实时更新
- [ ] 所有标签 `statLabel` 文本正确
- [ ] 所有图标 `statIcon` 显示正常

#### 1.4 操作卡片检查
- [ ] 操作卡片网格 `actionCardsGrid` 布局正确
- [ ] 课程管理卡片 `courseManagementCard` 完整
- [ ] 辅导学生卡片 `tutoringStudentCard` 完整
- [ ] AP学生卡片 `apStudentCard` 完整
- [ ] 工单管理卡片 `ticketManagementCard` 完整
- [ ] 所有按钮功能正常
- [ ] 所有描述文本正确

#### 1.5 定价方案检查
- [ ] 定价方案网格 `pricingPlansGrid` 布局正确
- [ ] PRA核心科目卡片 `praCoreSubjectsCard` 完整
- [ ] PRA全科目卡片 `praAllSubjectsCard` 推荐标识正确
- [ ] PRA全科目+治疗卡片 `praAllTherapyCard` 完整
- [ ] Purple Ruler Blueprint卡片 `purpleRulerBlueprintCard` 样式正确
- [ ] 所有价格显示准确
- [ ] 所有选择按钮功能正常

### 2. 功能验证

#### 2.1 数据连接验证
- [ ] Students集合 (CMS-7) 连接正常
  - [ ] 调用 `testCMS7Connection()` 验证连接
  - [ ] 检查学生数据读取和写入权限
  - [ ] 验证数据字段映射正确性
  - [ ] 测试数据同步延迟和性能
- [ ] StudentRegistrations集合 (CMS-1) 连接正常
  - [ ] 调用 `testCMS1Connection()` 验证连接
  - [ ] 检查注册数据的CRUD操作
  - [ ] 验证状态字段更新机制
  - [ ] 测试批量数据处理能力
- [ ] Import86集合 (CMS-3) 连接正常
  - [ ] 调用 `testCMS3Connection()` 验证连接
  - [ ] 检查导入数据的读取权限
  - [ ] 验证数据格式转换正确性
  - [ ] 测试大文件导入处理
- [ ] Tickets集合 (CMS-10) 连接正常
  - [ ] 调用 `testCMS10Connection()` 验证连接
  - [ ] 检查工单数据的完整CRUD操作
  - [ ] 验证状态流转和历史记录
  - [ ] 测试实时更新和通知机制
- [ ] Users集合 (CMS-6) 连接正常
  - [ ] 调用 `testCMS6Connection()` 验证连接
  - [ ] 检查用户权限数据读取
  - [ ] 验证角色和权限映射
  - [ ] 测试会话管理数据同步
- [ ] SystemLogs集合 (CMS-5) 连接正常
  - [ ] 调用 `testCMS5Connection()` 验证连接
  - [ ] 检查日志数据写入权限
  - [ ] 验证日志格式和结构
  - [ ] 测试日志查询和过滤功能
- [ ] 所有数据集权限配置正确
  - [ ] 验证读写权限设置 `validateDataPermissions()`
  - [ ] 检查字段级别访问控制
  - [ ] 测试角色权限继承关系
- [ ] 数据过滤器工作正常
  - [ ] 测试基于角色的数据过滤 `testRoleBasedFiltering()`
  - [ ] 验证动态过滤条件应用
  - [ ] 检查过滤性能和准确性
- [ ] 数据排序功能正确
  - [ ] 测试多字段排序 `testMultiFieldSorting()`
  - [ ] 验证排序性能和稳定性
  - [ ] 检查排序状态保持

#### 2.2 Lightbox功能验证
- [ ] 课程管理Lightbox `courseManagementLightbox` 打开正常
  - [ ] 调用 `openCourseManagementModal()` 测试打开
  - [ ] 验证课程数据加载和显示
  - [ ] 测试搜索和筛选功能
  - [ ] 检查分页和数据更新
  - [ ] 验证批量操作功能
- [ ] 学生管理Lightbox `studentManagementLightbox` 打开正常
  - [ ] 调用 `openStudentModal()` 测试打开
  - [ ] 验证学生信息表单加载
  - [ ] 测试字段验证和错误提示
  - [ ] 检查文件上传功能
  - [ ] 验证数据保存和更新
- [ ] AP学生注册Lightbox `apStudentRegistrationLightbox` 打开正常
  - [ ] 调用 `openAPStudentModal()` 测试打开
  - [ ] 验证多步骤表单导航
  - [ ] 测试进度指示器功能
  - [ ] 检查表单数据验证
  - [ ] 验证草稿保存功能
- [ ] 移除AP学生Lightbox `removeAPStudentLightbox` 打开正常
  - [ ] 调用 `openRemoveAPStudentModal()` 测试打开
  - [ ] 验证学生列表加载和搜索
  - [ ] 测试移除原因表单
  - [ ] 检查确认对话框功能
  - [ ] 验证操作日志记录
- [ ] 所有Lightbox关闭功能正常
  - [ ] 测试关闭按钮 `closeLightbox()` 功能
  - [ ] 验证ESC键关闭功能
  - [ ] 检查背景点击关闭
  - [ ] 测试数据保存提示
- [ ] 所有表单验证工作正常
  - [ ] 测试必填字段验证 `validateRequiredFields()`
  - [ ] 验证数据格式验证
  - [ ] 检查实时验证反馈
  - [ ] 测试自定义验证规则
- [ ] 所有提交功能正常
  - [ ] 测试表单提交 `submitForm()` 功能
  - [ ] 验证数据保存到CMS集合
  - [ ] 检查Lark同步功能
  - [ ] 测试成功和错误处理

#### 2.3 Lark集成验证
- [ ] 课程注册表单链接正确
  - [ ] 验证Lark Anycross表单URL正确性
  - [ ] 测试表单预填充数据 `prefillLarkForm()`
  - [ ] 检查表单字段映射
  - [ ] 验证提交后数据回传
- [ ] 工单提交表单链接正确
  - [ ] 验证工单表单URL和参数
  - [ ] 测试工单类型和优先级传递
  - [ ] 检查用户信息预填充
  - [ ] 验证工单状态同步
- [ ] AP学生注册同步功能正常
  - [ ] 测试注册数据同步 `syncAPStudentToLark()`
  - [ ] 验证数据格式转换
  - [ ] 检查同步状态监控
  - [ ] 测试同步失败重试机制
- [ ] 所有外部链接可访问
  - [ ] 验证Lark服务可用性 `checkLarkServiceStatus()`
  - [ ] 测试网络连接和超时设置
  - [ ] 检查SSL证书有效性
  - [ ] 验证跨域访问配置
- [ ] 数据传输格式正确
  - [ ] 测试JSON数据格式 `validateJSONFormat()`
  - [ ] 验证字符编码处理
  - [ ] 检查特殊字符转义
  - [ ] 测试数据完整性校验
- [ ] 错误处理机制正常
  - [ ] 测试网络错误处理 `handleNetworkError()`
  - [ ] 验证服务器错误响应
  - [ ] 检查用户友好错误提示
  - [ ] 测试错误日志记录

#### 2.4 文件上传验证
- [ ] EHCP文件上传功能正常
  - [ ] 测试文件选择和上传 `uploadEHCPFile()`
  - [ ] 验证上传进度显示
  - [ ] 检查文件预览功能
  - [ ] 测试上传完成回调
- [ ] 文件类型验证正确
  - [ ] 测试允许的文件格式 `validateFileType()`
  - [ ] 验证MIME类型检查
  - [ ] 检查文件扩展名验证
  - [ ] 测试恶意文件检测
- [ ] 文件大小限制有效
  - [ ] 测试文件大小检查 `validateFileSize()`
  - [ ] 验证大文件分片上传
  - [ ] 检查存储空间限制
  - [ ] 测试超大文件处理
- [ ] 文件存储路径正确
  - [ ] 验证文件存储目录结构
  - [ ] 测试文件路径生成 `generateFilePath()`
  - [ ] 检查文件去重机制
  - [ ] 验证存储权限设置
- [ ] 文件命名规则正确
  - [ ] 测试文件重命名 `generateFileName()`
  - [ ] 验证特殊字符处理
  - [ ] 检查文件名长度限制
  - [ ] 测试文件名冲突处理
- [ ] 文件访问权限正确
  - [ ] 验证文件访问控制 `checkFileAccess()`
  - [ ] 测试基于角色的文件权限
  - [ ] 检查文件下载权限
  - [ ] 验证文件分享功能

### 3. 用户体验验证

#### 3.1 响应式设计验证
- [ ] 桌面端 (>1200px) 显示正常
- [ ] 平板端 (768px-1200px) 布局适应
- [ ] 移动端 (<768px) 单列布局正确
- [ ] 所有断点过渡平滑
- [ ] 触摸操作友好

#### 3.2 交互反馈验证
- [ ] 按钮悬停效果正常
- [ ] 按钮点击反馈正确
- [ ] 卡片悬停效果正常
- [ ] 加载状态显示正确
- [ ] 错误状态提示友好

#### 3.3 性能验证
- [ ] 页面加载时间 <3秒
- [ ] 数据刷新响应 <1秒
- [ ] 图片加载优化正常
- [ ] 缓存策略有效
- [ ] 内存使用合理

### 4. 安全验证

#### 4.1 权限控制验证
- [ ] 用户角色识别正确
- [ ] 功能权限控制有效
- [ ] 数据访问权限正确
- [ ] 敏感操作需要确认
- [ ] 会话管理安全

#### 4.2 数据安全验证
- [ ] 数据传输加密 (HTTPS)
- [ ] 输入数据验证正确
- [ ] SQL注入防护有效
- [ ] XSS攻击防护有效
- [ ] 文件上传安全检查

### 5. 兼容性验证

#### 5.1 浏览器兼容性
- [ ] Chrome 90+ 功能正常
- [ ] Firefox 88+ 功能正常
- [ ] Safari 14+ 功能正常
- [ ] Edge 90+ 功能正常
- [ ] 移动浏览器功能正常

#### 5.2 设备兼容性
- [ ] Windows 系统正常
- [ ] macOS 系统正常
- [ ] iOS 设备正常
- [ ] Android 设备正常
- [ ] 不同屏幕分辨率适应

## 七、技术规范

### 1. 前端技术规范

#### 1.1 Wix元素规范
- **命名约定**: 使用驼峰命名法，语义化命名
- **ID规范**: 每个元素必须有唯一且描述性的ID
- **类名规范**: 使用BEM命名方法论
- **数据绑定**: 使用Wix数据集进行数据绑定
- **事件处理**: 统一的事件处理机制

#### 1.2 样式规范
- **颜色系统**: 使用统一的颜色变量
  - 主色: #663399 (Purple Ruler紫)
  - 成功色: #28a745
  - 警告色: #ffc107
  - 危险色: #dc3545
  - 信息色: #17a2b8
- **字体系统**: 统一的字体大小和行高
- **间距系统**: 8px基础单位的间距系统
- **阴影系统**: 统一的阴影效果

#### 1.3 响应式规范
- **断点定义**:
  - 移动端: <768px
  - 平板端: 768px-1200px
  - 桌面端: >1200px
- **布局策略**: 移动优先的响应式设计
- **图片适配**: 响应式图片和图标

### 2. 数据库规范

#### 2.1 CMS数据字典

##### 2.1.1 核心CMS四大类
本系统的CMS集合按功能可分为四大核心类别：

1. **学生管理类**
   - 负责学生信息的注册、存储和管理
   - 包含集合：CMS-1、CMS-2、CMS-7、CMS-8

2. **课程管理类**
   - 负责课程信息的存储和管理
   - 包含集合：CMS-3、CMS-11

3. **报告与统计类**
   - 负责学生报告和系统统计数据
   - 包含集合：CMS-4、CMS-9

4. **系统管理类**
   - 负责系统日志、管理员信息和工单管理
   - 包含集合：CMS-5、CMS-6、CMS-10

##### 2.1.2 CMS集合完整列表

| 编号 | 集合名称 | 英文名称 | 主要功能 | 关联集合 |
|------|---------|---------|---------|----------|
| CMS-1 | 学生注册信息集合 | StudentRegistrations | 存储学生注册信息 | CMS-7 |
| CMS-2 | 学生课程分配集合 | StudentCourseAssignment | 管理学生与课程的关联 | CMS-3, CMS-7 |
| CMS-3 | 课程信息管理集合 | Import86 | 存储课程基本信息 | CMS-2 |
| CMS-4 | 学生报告集合 | StudentReport | 存储学生学习报告 | CMS-7 |
| CMS-5 | CMS数据同步日志集合 | DataSyncLogs | 记录系统同步日志 | - |
| CMS-6 | 管理员集合 | Admins | 存储管理员信息 | - |
| CMS-7 | 学生集合 | Students | 存储学生完整信息 | CMS-1, CMS-2, CMS-4 |
| CMS-8 | 学生沟通集合 | StudentCommunication | 记录与学生的沟通 | CMS-7 |
| CMS-9 | PR统计集合 | PR-Statistics | 存储系统统计数据 | - |
| CMS-10 | 工单集合 | Tickets | 管理支持工单 | - |
| CMS-11 | 课程管理集合 | CourseManagement | 管理课程操作 | CMS-3 |

#### 2.2 CMS集合规范
- **命名规范**: 使用PascalCase命名
- **字段类型**: 严格的字段类型定义
- **索引策略**: 合理的索引配置
- **权限设置**: 细粒度的权限控制

#### 2.3 数据验证规范
- **必填字段**: 明确的必填字段定义
- **数据格式**: 严格的数据格式验证
- **数据长度**: 合理的数据长度限制
- **数据关系**: 正确的数据关联关系

### 3. API规范

#### 3.1 Lark集成规范
- **端点命名**: RESTful API命名规范
- **请求格式**: 统一的JSON请求格式
- **响应格式**: 标准化的响应格式
- **错误处理**: 统一的错误码和错误信息

#### 3.2 数据传输规范
- **数据加密**: 敏感数据加密传输
- **数据压缩**: 大数据量的压缩传输
- **超时设置**: 合理的请求超时设置
- **重试机制**: 失败请求的重试策略

### 4. 安全规范

#### 4.1 认证授权规范
- **身份认证**: 安全的用户身份认证
- **权限控制**: 基于角色的权限控制
- **会话管理**: 安全的会话管理机制
- **密码策略**: 强密码策略要求

#### 4.2 数据保护规范
- **数据加密**: 静态数据和传输数据加密
- **数据备份**: 定期的数据备份策略
- **数据恢复**: 可靠的数据恢复机制
- **隐私保护**: 用户隐私数据保护

### 5. 性能规范

#### 5.1 加载性能规范
- **首屏加载**: 3秒内完成首屏加载
- **资源优化**: 图片、CSS、JS资源优化
- **缓存策略**: 合理的浏览器缓存策略
- **CDN使用**: 静态资源CDN加速

#### 5.2 运行性能规范
- **内存使用**: 合理的内存使用控制
- **CPU使用**: 避免高CPU占用操作
- **网络请求**: 减少不必要的网络请求
- **数据库查询**: 优化数据库查询性能

### 6. 测试规范

#### 6.1 功能测试规范
- **单元测试**: 关键函数的单元测试
- **集成测试**: 模块间的集成测试
- **端到端测试**: 完整业务流程测试
- **回归测试**: 版本更新的回归测试

#### 6.2 性能测试规范
- **负载测试**: 正常负载下的性能测试
- **压力测试**: 极限负载下的压力测试
- **稳定性测试**: 长时间运行的稳定性测试
- **兼容性测试**: 多浏览器兼容性测试

### 7. 部署规范

#### 7.1 环境配置规范
- **开发环境**: 本地开发环境配置
- **测试环境**: 测试环境配置和数据
- **预生产环境**: 预生产环境验证
- **生产环境**: 生产环境部署和监控

#### 7.2 发布流程规范
- **代码审查**: 严格的代码审查流程
- **自动化测试**: 自动化测试流水线
- **灰度发布**: 渐进式的功能发布
- **回滚策略**: 快速回滚机制

### 8. 监控规范

#### 8.1 系统监控规范
- **性能监控**: 系统性能指标监控
- **错误监控**: 错误日志收集和分析
- **用户行为**: 用户行为数据收集
- **业务指标**: 关键业务指标跟踪

#### 8.2 告警规范
- **告警阈值**: 合理的告警阈值设置
- **告警通道**: 多渠道告警通知
- **告警处理**: 告警事件处理流程
- **告警优化**: 告警规则持续优化

### 9. 系统负载估算与Wix Data限流评估

#### 9.1 系统规模估算

**Daily Active Admin (DAA) 估算：**
- 基于教育机构规模：预计 **5-15个活跃管理员**
- 角色分布：超级管理员(1-2人)、管理员(2-5人)、教师(2-8人)
- 峰值时段：工作日9:00-17:00

**Students 总量估算：**
- 辅导学生：**200-500人**
- AP学生：**50-150人**
- 总计：**250-650名学生**

#### 9.2 并发读写量分析

**自动数据更新频率：**
- 统计数据：每5分钟刷新 (12次/小时)
- 学生状态：每2分钟检查 (30次/小时)
- 工单状态：每1分钟检查 (60次/小时)

**用户操作频率估算：**
- 页面加载：每个管理员每小时5-10次
- 数据查询：每个管理员每小时15-25次
- 数据写入：每个管理员每小时2-5次

**峰值并发计算：**
- **读取请求**：约 **180-300 req/hour** (3-5 req/min)
- **写入请求**：约 **30-75 req/hour** (0.5-1.25 req/min)
- **总计**：约 **210-375 req/hour** (3.5-6.25 req/min)

#### 9.3 Wix Data限流评估

**当前限制：500 req/min**

**评估结果：✅ 完全足够**
- 预计峰值使用量：**6.25 req/min**
- 安全余量：**98.75%** (494 req/min剩余)
- 即使用户量增长10倍仍在安全范围内

#### 9.4 性能优化建议

**缓存策略：**
- 统计数据本地缓存5分钟
- 用户信息会话级缓存
- 减少重复API调用

**批量操作：**
- 合并多个数据查询
- 使用批量更新减少写入次数

**监控机制：**
- 实施API调用监控
- 设置使用量告警阈值(50% = 250 req/min)

#### 9.5 扩展性评估

系统可支持：
- **学生数量**：最多5000人 (10倍增长)
- **管理员数量**：最多50人 (3倍增长)
- **并发操作**：最多100 req/min (16倍增长)

**结论**：当前Wix Data限流配置对于管理员仪表板系统完全充足，具有良好的扩展空间。

## 界面设计要求

### 1. 色彩规范
- **主色调**: #663399 (紫色)
- **主色调深色**: #4a2570
- **主色调浅色**: #8a5bb8
- **成功色**: #28a745 (绿色)
- **警告色**: #ffc107 (黄色)
- **危险色**: #dc3545 (红色)
- **信息色**: #17a2b8 (蓝色)
- **背景色**: #f8f9fa (浅灰)
- **白色**: #ffffff

### 2. 字体规范
- **字体族**: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif
- **主标题**: 2rem, 600 字重
- **区域标题**: 1.3rem, 700 字重
- **正文**: 0.95rem, 400 字重
- **小文本**: 0.8rem, 400 字重

### 3. 间距和布局
- **容器内边距**: 20px
- **卡片内边距**: 25-30px
- **按钮内边距**: 12px 20px
- **网格间距**: 20px
- **圆角半径**: 8-12px

### 4. 阴影和效果
- **基础阴影**: 0 2px 10px rgba(0,0,0,0.1)
- **悬停阴影**: 0 4px 12px rgba(0,0,0,0.15)
- **卡片悬停**: 上移5px + 阴影增强
- **按钮悬停**: 上移2-3px + 渐变效果

## 五、数据交互需求

### 1. CMS数据库连接

#### 1.1 Students集合 (CMS-7)
- **连接ID**: `studentsDataset`
- **权限**: 读取、创建、更新
- **过滤器**: 
  - 活跃学生: `status = "active"`
  - AP学生: `isAP = true`
  - 辅导学生: `studentType = "tutoring"`
- **排序**: `createdDate` 降序
- **字段映射**:
  - `name` → 学生姓名
  - `email` → 学生邮箱
  - `phone` → 学生电话
  - `status` → 学生状态
  - `isAP` → AP学生标识
  - `course` → 课程信息
  - `grade` → 年级
  - `guardianName` → 监护人姓名
  - `guardianPhone` → 监护人电话
  - `guardianEmail` → 监护人邮箱

#### 1.2 StudentRegistrations集合 (CMS-1)
- **连接ID**: `studentRegistrationsDataset`
- **权限**: 读取、创建
- **过滤器**: `status = "pending"`
- **字段映射**:
  - `studentName` → 学生姓名
  - `age` → 学生年龄
  - `sendStatus` → SEND状态
  - `guardianName` → 监护人姓名
  - `guardianPhone` → 监护人电话
  - `guardianEmail` → 监护人邮箱
  - `medicalInfo` → 医疗信息
  - `educationBackground` → 教育背景
  - `educationPlan` → 教育计划
  - `ehcpFile` → EHCP文件
  - `homeLessonsWithoutSupervision` → 家庭课程监督
  - `supportLongerThanFourWeeks` → 长期支持

#### 1.3 Import86集合 (CMS-3)
- **连接ID**: `coursesDataset`
- **权限**: 读取
- **用途**: 课程选择下拉框数据源
- **字段映射**:
  - `courseId` → 课程ID
  - `courseName` → 课程名称
  - `courseType` → 课程类型

#### 1.4 Tickets集合 (CMS-10)
- **连接ID**: `ticketsDataset`
- **权限**: 读取、创建
- **过滤器**: 按用户ID过滤
- **字段映射**:
  - `ticketId` → 工单ID
  - `title` → 工单标题
  - `status` → 工单状态
  - `priority` → 优先级
  - `createdDate` → 创建日期

### 2. Lark Anycross集成

#### 2.1 课程注册表单
- **端点**: `/api/lark/course-enrollment`
- **方法**: POST
- **触发元素**: `courseEnrollmentBtn`
- **数据传输**: 
  - 用户ID
  - 选定课程ID
  - 注册时间戳
- **响应处理**: 显示成功/失败消息

#### 2.2 工单提交表单
- **端点**: `/api/lark/submit-ticket`
- **方法**: POST
- **触发元素**: `submitTicketBtn`
- **数据传输**:
  - 用户ID
  - 工单类型
  - 问题描述
  - 优先级
- **响应处理**: 返回工单ID并显示确认

#### 2.3 AP学生注册同步
- **端点**: `/api/lark/ap-student-registration`
- **方法**: POST
- **触发元素**: `registerAPStudentBtn`
- **数据传输**: 完整的AP学生注册表单数据
- **响应处理**: 同步到Lark Base并更新CMS

### 3. 文件管理

#### 3.1 EHCP文件上传
- **存储位置**: Wix Media Manager
- **文件夹**: `/ap-students/ehcp-files/`
- **命名规则**: `{studentName}_{timestamp}_ehcp.{extension}`
- **安全验证**: 
  - 文件类型检查 (PDF, DOC, DOCX)
  - 文件大小限制 (10MB)
  - 病毒扫描
- **备份策略**: 自动备份到云存储

#### 3.2 文件访问权限
- **管理员**: 完全访问权限
- **教师**: 只读权限
- **家长**: 仅自己孩子的文件
- **审计日志**: 记录所有文件访问活动

## 验证检查清单

### 1. 界面验证 ✅
- [ ] 侧边栏导航正确显示和交互
- [ ] 页面头部布局和样式正确
- [ ] 统计卡片数据正确显示
- [ ] 功能操作区域布局正确
- [ ] 定价方案卡片显示和交互正常
- [ ] 响应式设计在不同屏幕尺寸下正常
- [ ] 色彩和字体规范符合设计要求
- [ ] 悬停和点击效果正常工作

### 2. 功能验证 ✅
- [ ] 导航跳转功能正常
- [ ] 统计数据实时更新
- [ ] 操作按钮功能正确
- [ ] 定价方案选择功能
- [ ] 通知系统正常工作
- [ ] 数据刷新机制正常

### 3. 数据验证 ✅
- [ ] CMS-1 学生注册数据正确读取
- [ ] CMS-2 课程分配数据正确显示
- [ ] CMS-3 课程信息数据正确获取
- [ ] CMS-4 学生报告数据正确处理
- [ ] CMS-6 管理员数据正确显示
- [ ] CMS-7 学生数据统计正确
- [ ] CMS-10 工单数据统计正确
- [ ] 数据同步状态正确显示

### 4. 性能验证 ✅
- [ ] 页面加载时间 < 3秒
- [ ] 数据查询响应时间 < 2秒
- [ ] 界面交互响应时间 < 500ms
- [ ] 内存使用合理
- [ ] 无内存泄漏问题

### 5. 兼容性验证 ✅
- [ ] Chrome 浏览器兼容性
- [ ] Firefox 浏览器兼容性
- [ ] Safari 浏览器兼容性
- [ ] Edge 浏览器兼容性
- [ ] 移动端浏览器兼容性
- [ ] 不同分辨率屏幕适配

### 6. 安全性验证 ✅
- [ ] 用户权限验证正确
- [ ] 数据访问权限控制
- [ ] 敏感信息保护
- [ ] XSS 攻击防护
- [ ] CSRF 攻击防护

## 技术规范

### 1. 前端技术要求
- **框架**: Wix Editor / Velo
- **样式**: CSS3 + Flexbox/Grid
- **交互**: JavaScript ES6+
- **响应式**: Mobile-first 设计
- **图标**: Font Awesome 6.0

### 2. 后端技术要求
- **数据库**: Wix CMS Collections
- **API**: Wix Data API
- **同步**: Lark Base Integration
- **文件处理**: Wix Media Manager
- **权限**: Wix Members & Permissions

### 3. 数据格式规范
- **日期格式**: ISO 8601 (YYYY-MM-DDTHH:mm:ss.sssZ)
- **货币格式**: 英镑 (£) + 两位小数
- **状态值**: 小写英文 + 下划线分隔
- **ID格式**: 系统生成的唯一标识符

### 4. 代码质量要求
- **代码注释**: 关键功能必须有中文注释
- **错误处理**: 所有异步操作必须有错误处理
- **性能优化**: 避免不必要的数据查询
- **代码复用**: 公共功能抽取为独立函数

## 验证流程

### 阶段1: 静态验证
1. 检查HTML结构是否符合设计
2. 验证CSS样式是否正确应用
3. 确认JavaScript语法无错误
4. 检查资源文件是否正确引用

### 阶段2: 功能验证
1. 测试所有交互功能
2. 验证数据显示正确性
3. 测试错误处理机制
4. 检查性能表现

### 阶段3: 集成验证
1. 测试与其他页面的集成
2. 验证数据同步功能
3. 测试用户权限控制
4. 检查安全性措施

### 阶段4: 用户验收
1. 管理员用户体验测试
2. 功能完整性确认
3. 性能满意度评估
4. 最终验收签字

---

**文档维护**: 本文档将根据开发进度和测试结果持续更新
**联系方式**: 如有疑问请联系项目负责人
**最后更新**: 2025年1月21日