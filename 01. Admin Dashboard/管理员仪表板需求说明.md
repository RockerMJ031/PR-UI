# 管理员仪表板详细需求说明文档

> **文档版本**: 2.0  
> **创建日期**: 2025年1月21日  
> **最后更新**: 2025年1月21日  
> **维护者**: 系统管理员  
> **用途**: AI和程序员代码实现与审核标准  
> **状态**: 详细规范 📋

## 📋 目录

1. [概述](#概述)
2. [页面元素详细清单](#页面元素详细清单)
3. [功能交互详细规范](#功能交互详细规范)
4. [CMS数据库交互规范](#cms数据库交互规范)
5. [Lark接口调用规范](#lark接口调用规范)
6. [界面设计要求](#界面设计要求)
7. [代码实现验证清单](#代码实现验证清单)
8. [技术规范](#技术规范)

## 概述

本文档是管理员仪表板的完整技术实现规范，基于 `admin-dashboard.html` 设计和 `CMS_Database_Configuration_Guide.md` 数据结构。该文档为AI和程序员提供详细的实现标准，确保前端界面、后端逻辑和数据交互的准确实现。

### 核心目标
- 提供统一的管理员操作界面
- 实现学生、课程、财务、报告的综合管理
- 确保数据的实时同步和准确性
- 提供直观的统计数据展示
- 集成Lark Anycross外部系统

### 技术架构
- **前端**: Wix Editor + Velo JavaScript
- **数据库**: 10个CMS集合 (CMS-1 到 CMS-10)
- **外部集成**: Lark Anycross API
- **文件管理**: Wix Media Manager + EHCP文件处理
- **权限控制**: Wix Members & Admin权限

## 页面元素详细清单

### 1. 布局结构元素 (Layout Elements)

#### 1.1 主要容器 (Main Containers)
- **页面容器**: `adminDashboardPage`
  - 类型: Wix Page
  - 背景色: #f8f9fa
  - 权限: Admin Only

- **头部条带**: `headerStrip`
  - 类型: Wix Strip
  - 高度: 80px
  - 背景色: #ffffff
  - 边框: 底部1px solid #e9ecef

- **主内容条带**: `mainContentStrip`
  - 类型: Wix Strip
  - 高度: 填充剩余空间
  - 背景色: #f8f9fa
  - 内边距: 20px

- **侧边栏列**: `sidebarColumn`
  - 类型: Wix Column
  - 宽度: 250px
  - 背景色: #ffffff
  - 右边框: 1px solid #e9ecef
  - 内边距: 20px

- **主内容列**: `mainColumn`
  - 类型: Wix Column
  - 宽度: 填充剩余空间
  - 内边距: 20px

#### 1.2 网格布局 (Grid Layouts)
- **统计卡片网格**: `statisticsGrid`
  - 类型: Wix Grid
  - 列数: 4
  - 间距: 20px
  - 高度: 自动

- **操作卡片网格**: `actionCardsGrid`
  - 类型: Wix Grid
  - 列数: 3
  - 间距: 20px
  - 高度: 自动

- **定价方案网格**: `pricingGrid`
  - 类型: Wix Grid
  - 列数: 3
  - 间距: 20px
  - 高度: 自动

### 2. 导航元素 (Navigation Elements)

#### 2.1 用户信息区域
- **用户头像**: `userAvatar`
  - 类型: Wix Image
  - 尺寸: 60x60px
  - 形状: 圆形
  - 数据源: 当前登录用户头像

- **用户名文本**: `usernameText`
  - 类型: Wix Text
  - 字体: 16px, 粗体
  - 数据源: 当前登录用户名

- **用户角色文本**: `userRoleText`
  - 类型: Wix Text
  - 字体: 14px
  - 颜色: #6c757d
  - 数据源: 当前用户角色

#### 2.2 导航按钮
- **仪表板导航**: `dashboardNavBtn`
  - 类型: Wix Button
  - 文本: "Dashboard"
  - 宽度: 100%
  - 高度: 40px
  - 状态: 激活 (背景: #007bff, 文字: 白色)
  - 点击事件: 无 (当前页面)

- **学生管理导航**: `studentsNavBtn`
  - 类型: Wix Button
  - 文本: "Students"
  - 宽度: 100%
  - 高度: 40px
  - 背景: 透明
  - 悬停: #f8f9fa
  - 点击事件: 跳转到学生管理页面

- **课程管理导航**: `sessionsNavBtn`
  - 类型: Wix Button
  - 文本: "Sessions"
  - 宽度: 100%
  - 高度: 40px
  - 背景: 透明
  - 悬停: #f8f9fa
  - 点击事件: 跳转到课程管理页面

- **报告中心导航**: `reportsNavBtn`
  - 类型: Wix Button
  - 文本: "Reports"
  - 宽度: 100%
  - 高度: 40px
  - 背景: 透明
  - 悬停: #f8f9fa
  - 点击事件: 跳转到报告页面

- **财务管理导航**: `financeNavBtn`
  - 类型: Wix Button
  - 文本: "Finance"
  - 宽度: 100%
  - 高度: 40px
  - 背景: 透明
  - 悬停: #f8f9fa
  - 点击事件: 跳转到财务页面

- **设置导航**: `settingsNavBtn`
  - 类型: Wix Button
  - 文本: "Settings"
  - 宽度: 100%
  - 高度: 40px
  - 背景: 透明
  - 悬停: #f8f9fa
  - 点击事件: 跳转到设置页面

### 3. 学生类型切换元素 (Student Type Toggle)

- **辅导学生按钮**: `tutoringStudentsBtn`
  - 类型: Wix Button
  - 文本: "Tutoring Students"
  - 背景色: #17a2b8 (信息色)
  - 文字颜色: 白色
  - 点击事件: 切换到辅导学生视图

- **AP学生按钮**: `apStudentsBtn`
  - 类型: Wix Button
  - 文本: "Alternative Provision Students"
  - 背景色: #663399 (主色调)
  - 文字颜色: 白色
  - 点击事件: 切换到AP学生视图

### 4. 统计卡片元素 (Statistics Cards)

#### 4.1 学生总数卡片
- **容器**: `totalStudentsCard`
  - 类型: Wix Container
  - 背景: 白色
  - 左边框: 4px solid #007bff (蓝色)
  - 圆角: 8px
  - 阴影: 0 2px 10px rgba(0,0,0,0.1)

- **数值文本**: `totalStudentsValue`
  - 类型: Wix Text
  - 字体: 48px, 粗体
  - 颜色: #007bff
  - 数据源: CMS-7 Students集合总数

- **标签文本**: `totalStudentsLabel`
  - 类型: Wix Text
  - 文本: "Total Students"
  - 字体: 16px
  - 颜色: #6c757d

#### 4.2 活跃学生卡片
- **容器**: `activeStudentsCard`
  - 类型: Wix Container
  - 背景: 白色
  - 左边框: 4px solid #28a745 (绿色)
  - 圆角: 8px
  - 阴影: 0 2px 10px rgba(0,0,0,0.1)

- **数值文本**: `activeStudentsValue`
  - 类型: Wix Text
  - 字体: 48px, 粗体
  - 颜色: #28a745
  - 数据源: CMS-7 Students集合 (status = "active")

- **标签文本**: `activeStudentsLabel`
  - 类型: Wix Text
  - 文本: "Active Students"
  - 字体: 16px
  - 颜色: #6c757d

#### 4.3 待审批卡片
- **容器**: `pendingApprovalCard`
  - 类型: Wix Container
  - 背景: 白色
  - 左边框: 4px solid #ffc107 (黄色)
  - 圆角: 8px
  - 阴影: 0 2px 10px rgba(0,0,0,0.1)

- **数值文本**: `pendingApprovalValue`
  - 类型: Wix Text
  - 字体: 48px, 粗体
  - 颜色: #ffc107
  - 数据源: CMS-1 StudentRegistrations集合 (registrationStatus = "pending")

- **标签文本**: `pendingApprovalLabel`
  - 类型: Wix Text
  - 文本: "Pending Approval"
  - 字体: 16px
  - 颜色: #6c757d

#### 4.4 需要关注卡片
- **容器**: `needAttentionCard`
  - 类型: Wix Container
  - 背景: 白色
  - 左边框: 4px solid #dc3545 (红色)
  - 圆角: 8px
  - 阴影: 0 2px 10px rgba(0,0,0,0.1)

- **数值文本**: `needAttentionValue`
  - 类型: Wix Text
  - 字体: 48px, 粗体
  - 颜色: #dc3545
  - 数据源: CMS-10 Tickets集合 (ticketType = "safeguarding", status = "open")

- **标签文本**: `needAttentionLabel`
  - 类型: Wix Text
  - 文本: "Safeguarding Issues"
  - 字体: 16px
  - 颜色: #6c757d

### 5. 操作卡片元素 (Action Cards)

#### 5.1 课程管理卡片
- **容器**: `courseManagementCard`
  - 类型: Wix Container
  - 背景: 白色
  - 圆角: 12px
  - 阴影: 0 2px 10px rgba(0,0,0,0.1)
  - 内边距: 25px

- **标题**: `courseManagementTitle`
  - 类型: Wix Text
  - 文本: "Course Management"
  - 字体: 1.3rem, 700字重
  - 颜色: #663399

- **描述**: `courseManagementDesc`
  - 类型: Wix Text
  - 文本: "Manage course extensions, cancellations and new courses"
  - 字体: 0.95rem
  - 颜色: #6c757d

- **课程注册按钮**: `courseEnrollmentBtn`
  - 类型: Wix Button
  - 文本: "Course Enrolment"
  - 背景: #007bff
  - 点击事件: 打开Lark外部表单
  - Lark链接: 课程注册表单URL

- **课程延期按钮**: `courseExtensionBtn`
  - 类型: Wix Button
  - 文本: "Course Extension"
  - 背景: #28a745
  - 点击事件: 打开课程管理Lightbox

- **取消课程按钮**: `cancelCourseBtn`
  - 类型: Wix Button
  - 文本: "Cancel Course"
  - 背景: #dc3545
  - 点击事件: 打开课程管理Lightbox

#### 5.2 辅导学生管理卡片
- **容器**: `tutoringStudentCard`
  - 类型: Wix Container
  - 背景: 白色
  - 圆角: 12px
  - 阴影: 0 2px 10px rgba(0,0,0,0.1)
  - 内边距: 25px

- **标题**: `tutoringStudentTitle`
  - 类型: Wix Text
  - 文本: "Tutoring Student"
  - 字体: 1.3rem, 700字重
  - 颜色: #663399

- **描述**: `tutoringStudentDesc`
  - 类型: Wix Text
  - 文本: "Manage tutoring student enrollment and sessions"
  - 字体: 0.95rem
  - 颜色: #6c757d

- **添加辅导学生按钮**: `addTutoringStudentBtn`
  - 类型: Wix Button
  - 文本: "Add Tutoring Student"
  - 背景: #28a745
  - 点击事件: 打开学生管理Lightbox

- **移除学生按钮**: `removeTutoringStudentBtn`
  - 类型: Wix Button
  - 文本: "Remove Student"
  - 背景: #dc3545
  - 点击事件: 打开学生管理Lightbox

#### 5.3 AP学生管理卡片
- **容器**: `apStudentCard`
  - 类型: Wix Container
  - 背景: 白色
  - 圆角: 12px
  - 阴影: 0 2px 10px rgba(0,0,0,0.1)
  - 内边距: 25px

- **标题**: `apStudentTitle`
  - 类型: Wix Text
  - 文本: "Alternative Provision"
  - 字体: 1.3rem, 700字重
  - 颜色: #663399

- **描述**: `apStudentDesc`
  - 类型: Wix Text
  - 文本: "Manage AP students and specialized educational provision"
  - 字体: 0.95rem
  - 颜色: #6c757d

- **AP学生计数器**: `apStudentCount`
  - 类型: Wix Text
  - 字体: 24px, 粗体
  - 颜色: #663399
  - 数据源: CMS-7 Students集合 (isAP = true)

- **添加AP学生按钮**: `addAPStudentBtn`
  - 类型: Wix Button
  - 文本: "Add AP Student"
  - 背景: #663399
  - 点击事件: 打开AP学生注册Lightbox

- **移除AP学生按钮**: `removeAPStudentBtn`
  - 类型: Wix Button
  - 文本: "Remove Student"
  - 背景: #dc3545
  - 点击事件: 打开移除AP学生Lightbox

#### 5.4 工单管理卡片
- **容器**: `ticketManagementCard`
  - 类型: Wix Container
  - 背景: 白色
  - 圆角: 12px
  - 阴影: 0 2px 10px rgba(0,0,0,0.1)
  - 内边距: 25px

- **标题**: `ticketManagementTitle`
  - 类型: Wix Text
  - 文本: "Ticket Management"
  - 字体: 1.3rem, 700字重
  - 颜色: #663399

- **描述**: `ticketManagementDesc`
  - 类型: Wix Text
  - 文本: "Submit support tickets and check status"
  - 字体: 0.95rem
  - 颜色: #6c757d

- **提交工单按钮**: `submitTicketBtn`
  - 类型: Wix Button
  - 文本: "Submit Ticket"
  - 背景: #007bff
  - 点击事件: 打开Lark外部表单
  - Lark链接: 工单提交表单URL

- **检查状态按钮**: `checkTicketStatusBtn`
  - 类型: Wix Button
  - 文本: "Check Status"
  - 背景: #17a2b8
  - 点击事件: 查询CMS-10 Tickets集合

### 6. Lightbox模态框元素 (Lightbox Elements)

#### 6.1 课程管理Lightbox
- **Lightbox容器**: `courseManagementLightbox`
  - 类型: Wix Lightbox
  - 标题: "Course Management"
  - 尺寸: 600x400px
  - 背景: 白色
  - 关闭按钮: 右上角X按钮

- **课程选择下拉框**: `courseSelectionDropdown`
  - 类型: Wix Dropdown
  - 数据源: CMS-3 Import86集合 (courseId字段)
  - 占位符: "Select a course"

- **操作选择下拉框**: `actionSelectionDropdown`
  - 类型: Wix Dropdown
  - 选项: ["Register", "Extend", "Cancel"]
  - 占位符: "Select action"

- **确认按钮**: `confirmCourseActionBtn`
  - 类型: Wix Button
  - 文本: "Confirm"
  - 背景: #28a745
  - 点击事件: 执行选定操作

- **取消按钮**: `cancelCourseActionBtn`
  - 类型: Wix Button
  - 文本: "Cancel"
  - 背景: #6c757d
  - 点击事件: 关闭Lightbox

#### 6.2 学生管理Lightbox
- **Lightbox容器**: `studentManagementLightbox`
  - 类型: Wix Lightbox
  - 标题: "Student Management"
  - 尺寸: 700x500px
  - 背景: 白色

- **多状态容器**: `studentFormContainer`
  - 类型: Wix Multi-state Container
  - 状态1: 添加学生表单
  - 状态2: 移除学生表单

- **学生姓名输入**: `studentNameInput`
  - 类型: Wix Text Input
  - 占位符: "Student Name"
  - 必填: 是

- **学生邮箱输入**: `studentEmailInput`
  - 类型: Wix Email Input
  - 占位符: "Student Email"
  - 验证: 邮箱格式

- **学生电话输入**: `studentPhoneInput`
  - 类型: Wix Phone Input
  - 占位符: "Student Phone"

- **学生状态下拉框**: `studentStatusDropdown`
  - 类型: Wix Dropdown
  - 选项: ["active", "inactive", "pending"]

- **学生课程下拉框**: `studentCourseDropdown`
  - 类型: Wix Dropdown
  - 数据源: CMS-3 Import86集合

- **提交添加学生按钮**: `submitAddStudentBtn`
  - 类型: Wix Button
  - 文本: "Add Student"
  - 背景: #28a745
  - 点击事件: 保存到CMS-7 Students集合

#### 6.3 AP学生注册Lightbox
- **Lightbox容器**: `apStudentRegistrationLightbox`
  - 类型: Wix Lightbox
  - 标题: "AP Student Registration"
  - 尺寸: 800x700px
  - 背景: 白色

- **AP学生姓名输入**: `apStudentNameInput`
  - 类型: Wix Text Input
  - 占位符: "Student Name"
  - 必填: 是

- **AP学生年龄输入**: `apStudentAgeInput`
  - 类型: Wix Number Input
  - 占位符: "Age"
  - 范围: 5-18

- **SEND状态下拉框**: `sendStatusDropdown`
  - 类型: Wix Dropdown
  - 选项: ["Yes", "No", "Under Assessment"]

- **监护人姓名输入**: `guardianNameInput`
  - 类型: Wix Text Input
  - 占位符: "Guardian Name"
  - 必填: 是

- **监护人电话输入**: `guardianPhoneInput`
  - 类型: Wix Phone Input
  - 占位符: "Guardian Phone"
  - 必填: 是

- **监护人邮箱输入**: `guardianEmailInput`
  - 类型: Wix Email Input
  - 占位符: "Guardian Email"
  - 验证: 邮箱格式

- **医疗信息文本域**: `medicalInfoTextarea`
  - 类型: Wix Text Area
  - 占位符: "Medical Information"
  - 行数: 4

- **教育背景文本域**: `educationBackgroundTextarea`
  - 类型: Wix Text Area
  - 占位符: "Education Background"
  - 行数: 4

- **教育计划下拉框**: `educationPlanDropdown`
  - 类型: Wix Dropdown
  - 选项: ["PRA - Core Subjects", "PRA - All Subjects", "PRA - All Subjects + Therapy", "Purple Ruler Blueprint"]

- **EHCP文件上传**: `ehcpFileUpload`
  - 类型: Wix Upload Button
  - 接受格式: PDF, DOC, DOCX
  - 最大大小: 10MB
  - 存储: Wix Media Manager

- **家庭课程监督下拉框**: `homeLessonsWithoutSupervisionDropdown`
  - 类型: Wix Dropdown
  - 问题: "Will your student(s) be accessing the lessons at home without adult supervision most of the time?"
  - 选项: ["Yes", "No"]

- **长期支持下拉框**: `supportLongerThanFourWeeksDropdown`
  - 类型: Wix Dropdown
  - 问题: "Is Purple Ruler expected to support the learner longer than four weeks?"
  - 选项: ["Yes", "No"]

- **注册AP学生按钮**: `registerAPStudentBtn`
  - 类型: Wix Button
  - 文本: "Register AP Student"
  - 背景: #663399
  - 点击事件: 保存到CMS-1 StudentRegistrations集合

#### 6.4 移除AP学生Lightbox
- **Lightbox容器**: `removeAPStudentLightbox`
  - 类型: Wix Lightbox
  - 标题: "Remove AP Student"
  - 尺寸: 600x500px
  - 背景: 白色

- **指导文本**: `removeInstructionText`
  - 类型: Wix Text
  - 文本: "Select a student to remove:"
  - 字体: 16px

- **警告文本**: `removeWarningText`
  - 类型: Wix Text
  - 文本: "Click on any student below to remove them from the AP program. This action cannot be undone."
  - 字体: 14px
  - 颜色: #dc3545

- **AP学生列表容器**: `apStudentsListContainer`
  - 类型: Wix Container
  - 数据源: CMS-7 Students集合 (isAP = true)
  - 布局: 垂直列表

- **学生项目容器**: `studentItemContainer` (重复元素)
  - 类型: Wix Container
  - 背景: #f8f9fa
  - 边框: 1px solid #dee2e6
  - 圆角: 8px
  - 内边距: 15px
  - 悬停效果: 背景变为#e9ecef

- **学生姓名文本**: `studentNameText`
  - 类型: Wix Text
  - 字体: 16px, 粗体
  - 数据绑定: student.name

- **学生详情文本**: `studentDetailsText`
  - 类型: Wix Text
  - 字体: 14px
  - 颜色: #666
  - 数据绑定: student.grade + " | " + student.course

- **状态徽章**: `statusBadge`
  - 类型: Wix Text
  - 背景: 动态 (Active: #28a745, Paused: #ffc107)
  - 文字颜色: 白色
  - 圆角: 12px
  - 内边距: 4px 8px

- **移除学生按钮**: `removeStudentButton`
  - 类型: Wix Button
  - 文本: "Remove"
  - 背景: #dc3545
  - 文字颜色: 白色
  - 点击事件: 确认移除对话框

### 7. 定价方案元素 (Pricing Plans)

#### 7.1 定价方案网格容器
- **容器**: `pricingPlansGrid`
  - 类型: Wix Grid
  - 列数: 4
  - 间距: 20px
  - 响应式: 移动端变为2列

#### 7.2 PRA核心科目方案卡片
- **容器**: `praCoreSubjectsCard`
  - 类型: Wix Container
  - 背景: 白色
  - 边框: 2px solid #e9ecef
  - 圆角: 12px
  - 内边距: 25px

- **方案标题**: `praCoreTitle`
  - 类型: Wix Text
  - 文本: "PRA - Core Subjects"
  - 字体: 1.4rem, 700字重
  - 颜色: #663399

- **价格显示**: `praCorePrice`
  - 类型: Wix Text
  - 文本: "£25/week"
  - 字体: 2rem, 粗体
  - 颜色: #28a745

- **功能列表**: `praCoreFeatures`
  - 类型: Wix Rich Text
  - 内容: 核心科目列表
  - 格式: 项目符号列表

- **选择按钮**: `selectPraCoreBtn`
  - 类型: Wix Button
  - 文本: "Select Plan"
  - 背景: #663399
  - 点击事件: 打开Lark外部表单

#### 7.3 PRA全科目方案卡片
- **容器**: `praAllSubjectsCard`
  - 类型: Wix Container
  - 背景: 白色
  - 边框: 2px solid #663399 (推荐方案)
  - 圆角: 12px
  - 内边距: 25px

- **推荐徽章**: `recommendedBadge`
  - 类型: Wix Text
  - 文本: "RECOMMENDED"
  - 背景: #663399
  - 文字颜色: 白色
  - 位置: 右上角

- **方案标题**: `praAllTitle`
  - 类型: Wix Text
  - 文本: "PRA - All Subjects"
  - 字体: 1.4rem, 700字重
  - 颜色: #663399

- **价格显示**: `praAllPrice`
  - 类型: Wix Text
  - 文本: "£35/week"
  - 字体: 2rem, 粗体
  - 颜色: #28a745

#### 7.4 PRA全科目+治疗方案卡片
- **容器**: `praAllTherapyCard`
  - 类型: Wix Container
  - 背景: 白色
  - 边框: 2px solid #e9ecef
  - 圆角: 12px
  - 内边距: 25px

- **方案标题**: `praAllTherapyTitle`
  - 类型: Wix Text
  - 文本: "PRA - All Subjects + Therapy"
  - 字体: 1.4rem, 700字重
  - 颜色: #663399

- **价格显示**: `praAllTherapyPrice`
  - 类型: Wix Text
  - 文本: "£45/week"
  - 字体: 2rem, 粗体
  - 颜色: #28a745

#### 7.5 Purple Ruler Blueprint方案卡片
- **容器**: `purpleRulerBlueprintCard`
  - 类型: Wix Container
  - 背景: 线性渐变 (#663399 到 #8a2be2)
  - 文字颜色: 白色
  - 圆角: 12px
  - 内边距: 25px

- **方案标题**: `blueprintTitle`
  - 类型: Wix Text
  - 文本: "Purple Ruler Blueprint"
  - 字体: 1.4rem, 700字重
  - 颜色: 白色

- **价格显示**: `blueprintPrice`
  - 类型: Wix Text
  - 文本: "Custom Pricing"
  - 字体: 1.5rem, 粗体
  - 颜色: #ffd700

- **联系按钮**: `contactForBlueprintBtn`
  - 类型: Wix Button
  - 文本: "Contact Us"
  - 背景: 白色
  - 文字颜色: #663399
  - 点击事件: 打开Lark外部表单

## 四、页面行为规范

### 1. 页面加载行为

#### 1.1 初始化序列
1. **页面框架加载** (0-500ms)
   - 显示页面骨架屏
   - 加载基础布局元素
   - 初始化导航组件

2. **数据获取阶段** (500-2000ms)
   - 并行查询所有CMS集合
   - 获取用户权限信息
   - 加载统计数据

3. **内容渲染阶段** (2000-3000ms)
   - 渲染统计卡片数据
   - 显示操作卡片
   - 加载定价方案

4. **交互就绪** (3000ms后)
   - 启用所有按钮和表单
   - 开始实时数据更新
   - 显示加载完成状态

#### 1.2 错误处理
- **网络错误**: 显示重试按钮和错误消息
- **数据为空**: 显示友好的空状态提示
- **权限不足**: 重定向到登录页面
- **超时处理**: 5秒后显示超时提示

### 2. 用户交互行为

#### 2.1 统计卡片交互
- **悬停效果**: 卡片轻微上升 (transform: translateY(-2px))
- **点击行为**: 根据卡片类型执行相应操作
  - 学生总数: 打开学生列表页面
  - 活跃学生: 打开活跃学生筛选视图
  - 待审批: 打开审批队列
  - 需要关注: 打开关注事项列表

#### 2.2 操作按钮交互
- **点击反馈**: 按钮按下效果 (transform: scale(0.98))
- **加载状态**: 显示旋转图标，禁用按钮
- **成功反馈**: 绿色勾选图标，2秒后恢复
- **错误反馈**: 红色警告图标，显示错误消息

#### 2.3 表单交互
- **实时验证**: 输入时即时验证字段
- **错误提示**: 字段下方显示具体错误信息
- **自动保存**: 每30秒自动保存草稿
- **提交确认**: 重要操作需要二次确认

### 3. 数据更新行为

#### 3.1 实时更新策略
- **统计数据**: 每5分钟自动刷新
- **学生状态**: 每2分钟检查更新
- **工单状态**: 每1分钟检查更新
- **文件上传**: 实时进度显示

#### 3.2 缓存策略
- **本地缓存**: 统计数据缓存5分钟
- **会话缓存**: 用户信息缓存整个会话
- **失效策略**: 数据变更时立即失效相关缓存

### 4. 权限控制行为

#### 4.1 角色权限
- **超级管理员**: 所有功能完全访问
- **管理员**: 除系统设置外的所有功能
- **教师**: 只读访问和基础操作
- **家长**: 仅自己孩子相关的信息

#### 4.2 功能权限检查
- **页面加载时**: 检查用户角色和权限
- **操作执行前**: 验证操作权限
- **数据显示时**: 根据权限过滤显示内容
- **API调用时**: 服务端再次验证权限

## 六、验证检查清单

### 1. 页面元素验证

#### 1.1 布局结构检查
- [ ] 页面容器 `adminDashboardContainer` 正确创建
- [ ] 头部条带 `headerStrip` 包含所有必需元素
- [ ] 主内容条带 `mainContentStrip` 布局正确
- [ ] 侧边栏列 `sidebarColumn` 宽度和内容正确
- [ ] 主内容列 `mainContentColumn` 响应式布局正常

#### 1.2 导航元素检查
- [ ] 用户信息区域 `userInfoSection` 显示正确
- [ ] 用户头像 `userAvatar` 加载正常
- [ ] 用户姓名 `userName` 数据绑定正确
- [ ] 用户角色 `userRole` 显示准确
- [ ] 导航按钮组 `navButtonGroup` 功能完整
- [ ] 仪表板按钮 `dashboardNavBtn` 激活状态正确
- [ ] 学生按钮 `studentsNavBtn` 链接正确
- [ ] 课程按钮 `coursesNavBtn` 链接正确
- [ ] 报告按钮 `reportsNavBtn` 链接正确
- [ ] 设置按钮 `settingsNavBtn` 权限控制正确

#### 1.3 统计卡片检查
- [ ] 统计卡片网格 `statsCardsGrid` 布局正确
- [ ] 学生总数卡片 `totalStudentsCard` 数据准确
- [ ] 活跃学生卡片 `activeStudentsCard` 计算正确
- [ ] 待审批卡片 `pendingApprovalsCard` 状态正确
- [ ] 需要关注卡片 `needsAttentionCard` 优先级正确
- [ ] 所有数值 `statValue` 实时更新
- [ ] 所有标签 `statLabel` 文本正确
- [ ] 所有图标 `statIcon` 显示正常

#### 1.4 操作卡片检查
- [ ] 操作卡片网格 `actionCardsGrid` 布局正确
- [ ] 课程管理卡片 `courseManagementCard` 完整
- [ ] 辅导学生卡片 `tutoringStudentCard` 完整
- [ ] AP学生卡片 `apStudentCard` 完整
- [ ] 工单管理卡片 `ticketManagementCard` 完整
- [ ] 所有按钮功能正常
- [ ] 所有描述文本正确

#### 1.5 定价方案检查
- [ ] 定价方案网格 `pricingPlansGrid` 布局正确
- [ ] PRA核心科目卡片 `praCoreSubjectsCard` 完整
- [ ] PRA全科目卡片 `praAllSubjectsCard` 推荐标识正确
- [ ] PRA全科目+治疗卡片 `praAllTherapyCard` 完整
- [ ] Purple Ruler Blueprint卡片 `purpleRulerBlueprintCard` 样式正确
- [ ] 所有价格显示准确
- [ ] 所有选择按钮功能正常

### 2. 功能验证

#### 2.1 数据连接验证
- [ ] Students集合 (CMS-7) 连接正常
- [ ] StudentRegistrations集合 (CMS-1) 连接正常
- [ ] Import86集合 (CMS-3) 连接正常
- [ ] Tickets集合 (CMS-10) 连接正常
- [ ] 所有数据集权限配置正确
- [ ] 数据过滤器工作正常
- [ ] 数据排序功能正确

#### 2.2 Lightbox功能验证
- [ ] 课程管理Lightbox `courseManagementLightbox` 打开正常
- [ ] 学生管理Lightbox `studentManagementLightbox` 打开正常
- [ ] AP学生注册Lightbox `apStudentRegistrationLightbox` 打开正常
- [ ] 移除AP学生Lightbox `removeAPStudentLightbox` 打开正常
- [ ] 所有Lightbox关闭功能正常
- [ ] 所有表单验证工作正常
- [ ] 所有提交功能正常

#### 2.3 Lark集成验证
- [ ] 课程注册表单链接正确
- [ ] 工单提交表单链接正确
- [ ] AP学生注册同步功能正常
- [ ] 所有外部链接可访问
- [ ] 数据传输格式正确
- [ ] 错误处理机制正常

#### 2.4 文件上传验证
- [ ] EHCP文件上传功能正常
- [ ] 文件类型验证正确
- [ ] 文件大小限制有效
- [ ] 文件存储路径正确
- [ ] 文件命名规则正确
- [ ] 文件访问权限正确

### 3. 用户体验验证

#### 3.1 响应式设计验证
- [ ] 桌面端 (>1200px) 显示正常
- [ ] 平板端 (768px-1200px) 布局适应
- [ ] 移动端 (<768px) 单列布局正确
- [ ] 所有断点过渡平滑
- [ ] 触摸操作友好

#### 3.2 交互反馈验证
- [ ] 按钮悬停效果正常
- [ ] 按钮点击反馈正确
- [ ] 卡片悬停效果正常
- [ ] 加载状态显示正确
- [ ] 错误状态提示友好

#### 3.3 性能验证
- [ ] 页面加载时间 <3秒
- [ ] 数据刷新响应 <1秒
- [ ] 图片加载优化正常
- [ ] 缓存策略有效
- [ ] 内存使用合理

### 4. 安全验证

#### 4.1 权限控制验证
- [ ] 用户角色识别正确
- [ ] 功能权限控制有效
- [ ] 数据访问权限正确
- [ ] 敏感操作需要确认
- [ ] 会话管理安全

#### 4.2 数据安全验证
- [ ] 数据传输加密 (HTTPS)
- [ ] 输入数据验证正确
- [ ] SQL注入防护有效
- [ ] XSS攻击防护有效
- [ ] 文件上传安全检查

### 5. 兼容性验证

#### 5.1 浏览器兼容性
- [ ] Chrome 90+ 功能正常
- [ ] Firefox 88+ 功能正常
- [ ] Safari 14+ 功能正常
- [ ] Edge 90+ 功能正常
- [ ] 移动浏览器功能正常

#### 5.2 设备兼容性
- [ ] Windows 系统正常
- [ ] macOS 系统正常
- [ ] iOS 设备正常
- [ ] Android 设备正常
- [ ] 不同屏幕分辨率适应

## 七、技术规范

### 1. 前端技术规范

#### 1.1 Wix元素规范
- **命名约定**: 使用驼峰命名法，语义化命名
- **ID规范**: 每个元素必须有唯一且描述性的ID
- **类名规范**: 使用BEM命名方法论
- **数据绑定**: 使用Wix数据集进行数据绑定
- **事件处理**: 统一的事件处理机制

#### 1.2 样式规范
- **颜色系统**: 使用统一的颜色变量
  - 主色: #663399 (Purple Ruler紫)
  - 成功色: #28a745
  - 警告色: #ffc107
  - 危险色: #dc3545
  - 信息色: #17a2b8
- **字体系统**: 统一的字体大小和行高
- **间距系统**: 8px基础单位的间距系统
- **阴影系统**: 统一的阴影效果

#### 1.3 响应式规范
- **断点定义**:
  - 移动端: <768px
  - 平板端: 768px-1200px
  - 桌面端: >1200px
- **布局策略**: 移动优先的响应式设计
- **图片适配**: 响应式图片和图标

### 2. 数据库规范

#### 2.1 CMS集合规范
- **命名规范**: 使用PascalCase命名
- **字段类型**: 严格的字段类型定义
- **索引策略**: 合理的索引配置
- **权限设置**: 细粒度的权限控制

#### 2.2 数据验证规范
- **必填字段**: 明确的必填字段定义
- **数据格式**: 严格的数据格式验证
- **数据长度**: 合理的数据长度限制
- **数据关系**: 正确的数据关联关系

### 3. API规范

#### 3.1 Lark集成规范
- **端点命名**: RESTful API命名规范
- **请求格式**: 统一的JSON请求格式
- **响应格式**: 标准化的响应格式
- **错误处理**: 统一的错误码和错误信息

#### 3.2 数据传输规范
- **数据加密**: 敏感数据加密传输
- **数据压缩**: 大数据量的压缩传输
- **超时设置**: 合理的请求超时设置
- **重试机制**: 失败请求的重试策略

### 4. 安全规范

#### 4.1 认证授权规范
- **身份认证**: 安全的用户身份认证
- **权限控制**: 基于角色的权限控制
- **会话管理**: 安全的会话管理机制
- **密码策略**: 强密码策略要求

#### 4.2 数据保护规范
- **数据加密**: 静态数据和传输数据加密
- **数据备份**: 定期的数据备份策略
- **数据恢复**: 可靠的数据恢复机制
- **隐私保护**: 用户隐私数据保护

### 5. 性能规范

#### 5.1 加载性能规范
- **首屏加载**: 3秒内完成首屏加载
- **资源优化**: 图片、CSS、JS资源优化
- **缓存策略**: 合理的浏览器缓存策略
- **CDN使用**: 静态资源CDN加速

#### 5.2 运行性能规范
- **内存使用**: 合理的内存使用控制
- **CPU使用**: 避免高CPU占用操作
- **网络请求**: 减少不必要的网络请求
- **数据库查询**: 优化数据库查询性能

### 6. 测试规范

#### 6.1 功能测试规范
- **单元测试**: 关键函数的单元测试
- **集成测试**: 模块间的集成测试
- **端到端测试**: 完整业务流程测试
- **回归测试**: 版本更新的回归测试

#### 6.2 性能测试规范
- **负载测试**: 正常负载下的性能测试
- **压力测试**: 极限负载下的压力测试
- **稳定性测试**: 长时间运行的稳定性测试
- **兼容性测试**: 多浏览器兼容性测试

### 7. 部署规范

#### 7.1 环境配置规范
- **开发环境**: 本地开发环境配置
- **测试环境**: 测试环境配置和数据
- **预生产环境**: 预生产环境验证
- **生产环境**: 生产环境部署和监控

#### 7.2 发布流程规范
- **代码审查**: 严格的代码审查流程
- **自动化测试**: 自动化测试流水线
- **灰度发布**: 渐进式的功能发布
- **回滚策略**: 快速回滚机制

### 8. 监控规范

#### 8.1 系统监控规范
- **性能监控**: 系统性能指标监控
- **错误监控**: 错误日志收集和分析
- **用户行为**: 用户行为数据收集
- **业务指标**: 关键业务指标跟踪

#### 8.2 告警规范
- **告警阈值**: 合理的告警阈值设置
- **告警通道**: 多渠道告警通知
- **告警处理**: 告警事件处理流程
- **告警优化**: 告警规则持续优化

### 9. 系统负载估算与Wix Data限流评估

#### 9.1 系统规模估算

**Daily Active Admin (DAA) 估算：**
- 基于教育机构规模：预计 **5-15个活跃管理员**
- 角色分布：超级管理员(1-2人)、管理员(2-5人)、教师(2-8人)
- 峰值时段：工作日9:00-17:00

**Students 总量估算：**
- 辅导学生：**200-500人**
- AP学生：**50-150人**
- 总计：**250-650名学生**

#### 9.2 并发读写量分析

**自动数据更新频率：**
- 统计数据：每5分钟刷新 (12次/小时)
- 学生状态：每2分钟检查 (30次/小时)
- 工单状态：每1分钟检查 (60次/小时)

**用户操作频率估算：**
- 页面加载：每个管理员每小时5-10次
- 数据查询：每个管理员每小时15-25次
- 数据写入：每个管理员每小时2-5次

**峰值并发计算：**
- **读取请求**：约 **180-300 req/hour** (3-5 req/min)
- **写入请求**：约 **30-75 req/hour** (0.5-1.25 req/min)
- **总计**：约 **210-375 req/hour** (3.5-6.25 req/min)

#### 9.3 Wix Data限流评估

**当前限制：500 req/min**

**评估结果：✅ 完全足够**
- 预计峰值使用量：**6.25 req/min**
- 安全余量：**98.75%** (494 req/min剩余)
- 即使用户量增长10倍仍在安全范围内

#### 9.4 性能优化建议

**缓存策略：**
- 统计数据本地缓存5分钟
- 用户信息会话级缓存
- 减少重复API调用

**批量操作：**
- 合并多个数据查询
- 使用批量更新减少写入次数

**监控机制：**
- 实施API调用监控
- 设置使用量告警阈值(50% = 250 req/min)

#### 9.5 扩展性评估

系统可支持：
- **学生数量**：最多5000人 (10倍增长)
- **管理员数量**：最多50人 (3倍增长)
- **并发操作**：最多100 req/min (16倍增长)

**结论**：当前Wix Data限流配置对于管理员仪表板系统完全充足，具有良好的扩展空间。

## 界面设计要求

### 1. 色彩规范
- **主色调**: #663399 (紫色)
- **主色调深色**: #4a2570
- **主色调浅色**: #8a5bb8
- **成功色**: #28a745 (绿色)
- **警告色**: #ffc107 (黄色)
- **危险色**: #dc3545 (红色)
- **信息色**: #17a2b8 (蓝色)
- **背景色**: #f8f9fa (浅灰)
- **白色**: #ffffff

### 2. 字体规范
- **字体族**: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif
- **主标题**: 2rem, 600 字重
- **区域标题**: 1.3rem, 700 字重
- **正文**: 0.95rem, 400 字重
- **小文本**: 0.8rem, 400 字重

### 3. 间距和布局
- **容器内边距**: 20px
- **卡片内边距**: 25-30px
- **按钮内边距**: 12px 20px
- **网格间距**: 20px
- **圆角半径**: 8-12px

### 4. 阴影和效果
- **基础阴影**: 0 2px 10px rgba(0,0,0,0.1)
- **悬停阴影**: 0 4px 12px rgba(0,0,0,0.15)
- **卡片悬停**: 上移5px + 阴影增强
- **按钮悬停**: 上移2-3px + 渐变效果

## 五、数据交互需求

### 1. CMS数据库连接

#### 1.1 Students集合 (CMS-7)
- **连接ID**: `studentsDataset`
- **权限**: 读取、创建、更新
- **过滤器**: 
  - 活跃学生: `status = "active"`
  - AP学生: `isAP = true`
  - 辅导学生: `studentType = "tutoring"`
- **排序**: `createdDate` 降序
- **字段映射**:
  - `name` → 学生姓名
  - `email` → 学生邮箱
  - `phone` → 学生电话
  - `status` → 学生状态
  - `isAP` → AP学生标识
  - `course` → 课程信息
  - `grade` → 年级
  - `guardianName` → 监护人姓名
  - `guardianPhone` → 监护人电话
  - `guardianEmail` → 监护人邮箱

#### 1.2 StudentRegistrations集合 (CMS-1)
- **连接ID**: `studentRegistrationsDataset`
- **权限**: 读取、创建
- **过滤器**: `status = "pending"`
- **字段映射**:
  - `studentName` → 学生姓名
  - `age` → 学生年龄
  - `sendStatus` → SEND状态
  - `guardianName` → 监护人姓名
  - `guardianPhone` → 监护人电话
  - `guardianEmail` → 监护人邮箱
  - `medicalInfo` → 医疗信息
  - `educationBackground` → 教育背景
  - `educationPlan` → 教育计划
  - `ehcpFile` → EHCP文件
  - `homeLessonsWithoutSupervision` → 家庭课程监督
  - `supportLongerThanFourWeeks` → 长期支持

#### 1.3 Import86集合 (CMS-3)
- **连接ID**: `coursesDataset`
- **权限**: 读取
- **用途**: 课程选择下拉框数据源
- **字段映射**:
  - `courseId` → 课程ID
  - `courseName` → 课程名称
  - `courseType` → 课程类型

#### 1.4 Tickets集合 (CMS-10)
- **连接ID**: `ticketsDataset`
- **权限**: 读取、创建
- **过滤器**: 按用户ID过滤
- **字段映射**:
  - `ticketId` → 工单ID
  - `title` → 工单标题
  - `status` → 工单状态
  - `priority` → 优先级
  - `createdDate` → 创建日期

### 2. Lark Anycross集成

#### 2.1 课程注册表单
- **端点**: `/api/lark/course-enrollment`
- **方法**: POST
- **触发元素**: `courseEnrollmentBtn`
- **数据传输**: 
  - 用户ID
  - 选定课程ID
  - 注册时间戳
- **响应处理**: 显示成功/失败消息

#### 2.2 工单提交表单
- **端点**: `/api/lark/submit-ticket`
- **方法**: POST
- **触发元素**: `submitTicketBtn`
- **数据传输**:
  - 用户ID
  - 工单类型
  - 问题描述
  - 优先级
- **响应处理**: 返回工单ID并显示确认

#### 2.3 AP学生注册同步
- **端点**: `/api/lark/ap-student-registration`
- **方法**: POST
- **触发元素**: `registerAPStudentBtn`
- **数据传输**: 完整的AP学生注册表单数据
- **响应处理**: 同步到Lark Base并更新CMS

### 3. 文件管理

#### 3.1 EHCP文件上传
- **存储位置**: Wix Media Manager
- **文件夹**: `/ap-students/ehcp-files/`
- **命名规则**: `{studentName}_{timestamp}_ehcp.{extension}`
- **安全验证**: 
  - 文件类型检查 (PDF, DOC, DOCX)
  - 文件大小限制 (10MB)
  - 病毒扫描
- **备份策略**: 自动备份到云存储

#### 3.2 文件访问权限
- **管理员**: 完全访问权限
- **教师**: 只读权限
- **家长**: 仅自己孩子的文件
- **审计日志**: 记录所有文件访问活动

## 验证检查清单

### 1. 界面验证 ✅
- [ ] 侧边栏导航正确显示和交互
- [ ] 页面头部布局和样式正确
- [ ] 统计卡片数据正确显示
- [ ] 功能操作区域布局正确
- [ ] 定价方案卡片显示和交互正常
- [ ] 响应式设计在不同屏幕尺寸下正常
- [ ] 色彩和字体规范符合设计要求
- [ ] 悬停和点击效果正常工作

### 2. 功能验证 ✅
- [ ] 导航跳转功能正常
- [ ] 统计数据实时更新
- [ ] 操作按钮功能正确
- [ ] 定价方案选择功能
- [ ] 通知系统正常工作
- [ ] 数据刷新机制正常

### 3. 数据验证 ✅
- [ ] CMS-1 学生注册数据正确读取
- [ ] CMS-2 课程分配数据正确显示
- [ ] CMS-3 课程信息数据正确获取
- [ ] CMS-4 学生报告数据正确处理
- [ ] CMS-6 管理员数据正确显示
- [ ] CMS-7 学生数据统计正确
- [ ] CMS-10 工单数据统计正确
- [ ] 数据同步状态正确显示

### 4. 性能验证 ✅
- [ ] 页面加载时间 < 3秒
- [ ] 数据查询响应时间 < 2秒
- [ ] 界面交互响应时间 < 500ms
- [ ] 内存使用合理
- [ ] 无内存泄漏问题

### 5. 兼容性验证 ✅
- [ ] Chrome 浏览器兼容性
- [ ] Firefox 浏览器兼容性
- [ ] Safari 浏览器兼容性
- [ ] Edge 浏览器兼容性
- [ ] 移动端浏览器兼容性
- [ ] 不同分辨率屏幕适配

### 6. 安全性验证 ✅
- [ ] 用户权限验证正确
- [ ] 数据访问权限控制
- [ ] 敏感信息保护
- [ ] XSS 攻击防护
- [ ] CSRF 攻击防护

## 技术规范

### 1. 前端技术要求
- **框架**: Wix Editor / Velo
- **样式**: CSS3 + Flexbox/Grid
- **交互**: JavaScript ES6+
- **响应式**: Mobile-first 设计
- **图标**: Font Awesome 6.0

### 2. 后端技术要求
- **数据库**: Wix CMS Collections
- **API**: Wix Data API
- **同步**: Lark Base Integration
- **文件处理**: Wix Media Manager
- **权限**: Wix Members & Permissions

### 3. 数据格式规范
- **日期格式**: ISO 8601 (YYYY-MM-DDTHH:mm:ss.sssZ)
- **货币格式**: 英镑 (£) + 两位小数
- **状态值**: 小写英文 + 下划线分隔
- **ID格式**: 系统生成的唯一标识符

### 4. 代码质量要求
- **代码注释**: 关键功能必须有中文注释
- **错误处理**: 所有异步操作必须有错误处理
- **性能优化**: 避免不必要的数据查询
- **代码复用**: 公共功能抽取为独立函数

## 验证流程

### 阶段1: 静态验证
1. 检查HTML结构是否符合设计
2. 验证CSS样式是否正确应用
3. 确认JavaScript语法无错误
4. 检查资源文件是否正确引用

### 阶段2: 功能验证
1. 测试所有交互功能
2. 验证数据显示正确性
3. 测试错误处理机制
4. 检查性能表现

### 阶段3: 集成验证
1. 测试与其他页面的集成
2. 验证数据同步功能
3. 测试用户权限控制
4. 检查安全性措施

### 阶段4: 用户验收
1. 管理员用户体验测试
2. 功能完整性确认
3. 性能满意度评估
4. 最终验收签字

---

**文档维护**: 本文档将根据开发进度和测试结果持续更新
**联系方式**: 如有疑问请联系项目负责人
**最后更新**: 2025年1月21日